<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>patchãƒ–ãƒ©ãƒ³ãƒè‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 900px;
      margin: 30px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      border-bottom: 3px solid #D50000;
      padding-bottom: 10px;
    }
    .button-large {
      display: block;
      width: 100%;
      background: #D50000;
      color: white;
      padding: 20px;
      font-size: 20px;
      font-weight: bold;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 20px 0;
      text-decoration: none;
      text-align: center;
      transition: background 0.3s;
    }
    .button-large:hover {
      background: #9b0000;
    }
    .button-large:active {
      transform: scale(0.98);
    }
    .info {
      background: #e3f2fd;
      padding: 15px;
      border-left: 4px solid #2196F3;
      margin: 20px 0;
      border-radius: 5px;
    }
    .step {
      background: #f9f9f9;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      border-left: 4px solid #4CAF50;
    }
    .step h3 {
      margin-top: 0;
      color: #4CAF50;
    }
    .code {
      background: #f5f5f5;
      padding: 10px;
      border-radius: 5px;
      font-family: 'Courier New', monospace;
      margin: 10px 0;
      word-break: break-all;
      font-size: 12px;
    }
    .success {
      background: #e8f5e9;
      color: #2e7d32;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
      display: none;
    }
    .warning {
      background: #fff3cd;
      color: #856404;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸš€ patchãƒ–ãƒ©ãƒ³ãƒè‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h1>
    
    <div class="info">
      <strong>ğŸ“‹ ä½¿ã„æ–¹ï¼š</strong><br>
      ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ä¿®æ­£å ±å‘Šæ›¸ã®å†…å®¹ãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã€GitHubã®ã€ŒCreate new fileã€ãƒšãƒ¼ã‚¸ãŒè‡ªå‹•çš„ã«é–‹ãã¾ã™ã€‚
    </div>

    <div class="warning">
      <strong>âš ï¸ æ³¨æ„ï¼š</strong><br>
      GitHubã®ç·¨é›†ç”»é¢ãŒé–‹ã„ãŸã‚‰ã€<strong>Ctrl + V</strong> ã§è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚
    </div>

    <div class="step">
      <h3>ğŸ“‹ ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
      <button class="button-large" onclick="uploadToGitHub()">
        ğŸš€ patchãƒ–ãƒ©ãƒ³ãƒã«ä¿®æ­£å ±å‘Šæ›¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
      </button>
      <div id="status" class="success"></div>
    </div>

    <div class="step">
      <h3>ğŸ“ æ‰‹é †ï¼ˆè‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ï¼‰</h3>
      <ol>
        <li>âœ… ä¿®æ­£å ±å‘Šæ›¸ã®å†…å®¹ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼</li>
        <li>âœ… GitHubã®ã€ŒCreate new fileã€ãƒšãƒ¼ã‚¸ã‚’é–‹ã</li>
        <li>â³ ãƒ•ã‚¡ã‚¤ãƒ«åã«ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š
          <div class="code">ä¿®æ­£å ±å‘Šæ›¸_v19.9.17-hf27-yahoo-rakuten-off.md</div>
        </li>
        <li>â³ ç·¨é›†ç”»é¢ã§ <strong>Ctrl + V</strong> ã‚’æŠ¼ã—ã¦è²¼ã‚Šä»˜ã‘</li>
        <li>â³ ç”»é¢ä¸‹éƒ¨ã®ã€Œ<strong>Commit new file</strong>ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
        <li>â³ ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š
          <div class="code">v19.9.17: ä¿®æ­£å ±å‘Šæ›¸ã‚’è¿½åŠ </div>
        </li>
        <li>â³ ã€Œ<strong>Commit new file</strong>ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
      </ol>
    </div>

    <div class="info">
      <strong>âœ… å®Œäº†ï¼</strong><br>
      ä¿å­˜å¾Œã€patchãƒ–ãƒ©ãƒ³ãƒã«ä¿®æ­£å ±å‘Šæ›¸ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚
    </div>
  </div>

  <script>
    const reportContent = `# ğŸ”§ Smart Price ä¿®æ­£å ±å‘Šæ›¸

**TO**: ãƒ¦ã‚¤ï¼ˆç›£ç£ï¼‰ã€ãªã¹ã•ã‚“ï¼ˆå®Ÿæ©Ÿæ¤œè¨¼ï¼‰  
**FROM**: Rex  
**DATE(JST)**: 2026-01-15 14:00 JST  
**VERSION**: v19.9.17-hf27-yahoo-rakuten-off  
**BUILD_ID**: 2026-01-15_1400_yahoo-rakuten-off

---

## ğŸ“‹ ä»Šå›ã®ä¿®æ­£ã‚¹ã‚³ãƒ¼ãƒ—

**ãƒ¦ã‚¤æŒ‡ç¤º**: å•†å“DBã®å„ªå…ˆé †ä½ã‚’ç¢ºå®šï¼ˆYahooâ†’å›½å†…â†’OFFï¼‰ï¼‹è‡ªå‹•æ•´å½¢ã®ç²¾åº¦ã‚¢ãƒƒãƒ—

**æ–¹é‡**: UIå¤‰æ›´ç¦æ­¢ï¼ˆè¦‹ãŸç›®ãƒ»æ–‡è¨€ãƒ»é…ç½®ãã®ã¾ã¾ï¼‰ã€‚å†…éƒ¨ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿ã€‚

---

## âœ… å®Ÿæ–½å†…å®¹

### 0. çµè«–ï¼ˆå„ªå…ˆé †ä½ï¼‰

**å¤‰æ›´å‰**: OFFå„ªå…ˆ â†’ Yahooä¾¡æ ¼å–å¾—

**å¤‰æ›´å¾Œ**: 
1. **Yahooæœ€å„ªå…ˆ**ï¼ˆç¾çŠ¶ã®ä»•çµ„ã¿ã‚’ç¶­æŒã€è³¢ãã™ã‚‹ï¼‰
2. **å›½å†…DBï¼ˆæ¥½å¤©ï¼‰ç¬¬2å„ªå…ˆ**ï¼ˆæ—¥æœ¬èªãƒ»ç”»åƒå“è³ªãŒå®‰å®šã—ã‚„ã™ã„ï¼‰
3. **Open Food Factsï¼ˆæµ·å¤–ï¼‰ç¬¬3å„ªå…ˆ**ï¼"æœ€å¾Œã®ä¿é™º"

**ç†ç”±**: è‹±èªåãƒ»è‡ªæ’®ã‚Šç”»åƒãƒ»ã‚«ãƒ†ã‚´ãƒªã¶ã‚ŒãŒèµ·ãã‚„ã™ã„ã®ã§ã€Œæœ€åˆã‹ã‚‰ä½¿ã‚ãªã„ã€

---

### 1. Yahooå´ã®å¼·åŒ–ï¼ˆãƒ™ãƒ¼ã‚¹ã¯ç¶­æŒã€è³¢ãã™ã‚‹ï¼‰

#### 1.1 ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ä»˜ã \`normalizeYahooProductInfo()\`

**ç›®çš„**: YahooãŒã€Œ12æœ¬1ç®±ã€ã¿ãŸã„ãªã‚¿ã‚¤ãƒˆãƒ«ã‚’è¿”ã—ã¦ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè²·ã†"1å€‹"ç›®ç·šã§è¡¨ç¤ºã™ã‚‹ã€‚

**å®Ÿè£…å†…å®¹**:
- **packCountæ¤œå‡º**: \`Ã—12æœ¬\` \`Ã—24å€‹\` ç­‰ã‹ã‚‰å€‹æ•°ã‚’æŠ½å‡º
- **isCaseåˆ¤å®š**: \`ã‚±ãƒ¼ã‚¹\` \`ç®±è²·ã„\` \`ã¾ã¨ã‚è²·ã„\` ç­‰ã‚’æ¤œå‡º
- **ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢**: åˆæœŸå€¤100ã€packç–‘ã„ãŒå¼·ã„ã¨ãã¯-20ã€ä¸­ã¯-10

**è¿”ã‚Šå€¤ã®æ‹¡å¼µ**:
\`\`\`javascript
{
  name: "...",
  maker: "...",
  imageUrl: "...",
  packHint: true/false,  // ã¾ã¨ã‚è²·ã„ãƒ•ãƒ©ã‚°
  packCount: 12,        // ã¾ã¨ã‚è²·ã„å€‹æ•°
  isCase: true/false,   // ã‚±ãƒ¼ã‚¹å•†å“ãƒ•ãƒ©ã‚°
  trustScore: 80        // ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ï¼ˆ100ãŒæœ€é«˜ï¼‰
}
\`\`\`

**å†…éƒ¨ãƒ¡ã‚¿æƒ…å ±ä¿æŒ**: \`packCount\` ã¨ \`isCase\` ã‚’ä¿æŒï¼ˆå°†æ¥ã®æ¯”è¼ƒã«ä½¿ã†ï¼‰

---

#### 1.2 ãƒ¡ãƒ¼ã‚«ãƒ¼å/è²©å£²åº—åæ··å…¥ã®æ­£è¦åŒ–é–¢æ•°ã‚’æ±ç”¨åŒ–

**æ–°è¦é–¢æ•°**: \`normalizeMakerName(maker)\`

**æ©Ÿèƒ½**:
- è²©å£²åº—åãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é™¤å»ï¼ˆåº—/ã‚¹ãƒˆã‚¢/ã‚·ãƒ§ãƒƒãƒ—/æ¥½å¤©/Amazon/Yahooç­‰ï¼‰
- Yahooãƒ»æ¥½å¤©ãƒ»OFFã™ã¹ã¦å…±é€šã®ã€Œæ­£è¦åŒ–é–¢æ•°ã€ã¨ã—ã¦å†åˆ©ç”¨

**ä½¿ç”¨ç®‡æ‰€**:
- \`normalizeYahooProductInfo()\` å†…ã§ä½¿ç”¨
- \`lookupRakutenByJan()\` å†…ã§ä½¿ç”¨
- å°†æ¥çš„ã«OFFã§ã‚‚ä½¿ç”¨å¯èƒ½

---

### 2. å›½å†…DBï¼ˆç¬¬2å„ªå…ˆï¼‰ã®å°å…¥ï¼šæ¥½å¤©ã‚’æƒ³å®š

#### 2.1 æ–°è¦é–¢æ•°: \`lookupRakutenByJan(jan, keyword = null)\`

**ç‹™ã„**: YahooãŒå¤‰ãªã¨ãã«ã€æ—¥æœ¬èªåãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»ç”»åƒã‚’å›½å†…ã‚½ãƒ¼ã‚¹ã§è£œå®Œã™ã‚‹ã€‚

**å®Ÿè£…å†…å®¹**:
- **Yahoo ProxyçµŒç”±**: \`action=rakuten\` ã§æ¥½å¤©ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
- **JANå„ªå…ˆ**: JANã§ãƒ’ãƒƒãƒˆã™ã‚‹ãªã‚‰JANå„ªå…ˆã€ãƒ€ãƒ¡ãªã‚‰ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: 12ç§’ï¼ˆYahooã¨æƒãˆã‚‹ï¼‰
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: å¤±æ•—æ™‚ã¯é™ã‹ã« \`null\` ã‚’è¿”ã™

**å–å¾—é …ç›®**:
- å•†å“å: \`product.name\`
- ãƒ–ãƒ©ãƒ³ãƒ‰/ãƒ¡ãƒ¼ã‚«ãƒ¼: \`product.brand\` ã¾ãŸã¯ \`product.maker\`
- ç”»åƒ: \`product.imageUrl\` ã¾ãŸã¯ \`product.mediumImageUrl\`

**æ­£è¦åŒ–**: ãƒ¡ãƒ¼ã‚«ãƒ¼åã¯ \`normalizeMakerName()\` ã§æ­£è¦åŒ–

---

#### 2.2 ãƒ•ãƒ­ãƒ¼ä¾‹ï¼ˆUIå¢—ã‚„ã•ãªã„ï¼‰

\`\`\`
Yahooã§å–å¾— â†’ çµæœãŒå¼±ã„/ç©ºãªã‚‰
  â†“
æ¥½å¤©ã§å–å¾—ï¼ˆJANã§ãƒ’ãƒƒãƒˆã™ã‚‹ãªã‚‰JANå„ªå…ˆã€ãƒ€ãƒ¡ãªã‚‰ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼‰
  â†“
æ¥½å¤©ãŒå–ã‚ŒãŸã‚‰ Yahooçµæœã‚’ä¸Šæ›¸ãã›ãšã€ã€Œä¸è¶³ã—ã¦ã„ã‚‹é …ç›®ã ã‘è£œå®Œã€
\`\`\`

**è£œå®Œãƒ«ãƒ¼ãƒ«**:
- ä¾‹ï¼šYahooã®ç”»åƒãŒã‚±ãƒ¼ã‚¹ç”»åƒã£ã½ã„â†’æ¥½å¤©ã®å˜å“ç”»åƒãŒã‚ã‚Œã°å·®ã—æ›¿ãˆ
- ä¾‹ï¼šãƒ¡ãƒ¼ã‚«ãƒ¼åãŒç©ºâ†’æ¥½å¤©ã§è£œå®Œ
- ä¾‹ï¼šå•†å“åãŒç©ºâ†’æ¥½å¤©ã§è£œå®Œ

---

### 3. Open Food Factsï¼ˆç¬¬3å„ªå…ˆï¼‰ã®"ä½¿ã„æ–¹ãƒ«ãƒ¼ãƒ«"

#### 3.1 çµ¶å¯¾ã«ç¬¬1å„ªå…ˆã«ã—ãªã„ã€‚è£œåŠ©ã ã‘ã€‚

**OFFã‚’ä½¿ã†æ¡ä»¶ï¼ˆã©ã‚Œã‹æº€ãŸã—ãŸã‚‰ï¼‰**:
- Yahooã‚‚æ¥½å¤©ã‚‚ã€Œæœªå–å¾—ã€ã¾ãŸã¯ã€Œæ•´å½¢å¾Œã‚‚ä¸è‡ªç„¶ã€
- ã‹ã¤ JANï¼ˆEAN-13ï¼‰ã§å•ã„åˆã‚ã›ã§ãã‚‹

**è‡ªå‹•å…¥åŠ›ã—ã¦ã„ã„æ¡ä»¶ï¼ˆå³ã—ã‚ï¼‰**:
1. **å•†å“åãŒæ—¥æœ¬èªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§å–ã‚Œã‚‹ã€ã¾ãŸã¯æ—¥æœ¬èªãŒååˆ†å«ã¾ã‚Œã‚‹**
   - \`product_name_ja\` ã¾ãŸã¯ \`generic_name_ja\` ãŒå­˜åœ¨
   - ã¾ãŸã¯å•†å“åã«æ—¥æœ¬èªæ–‡å­—ï¼ˆã²ã‚‰ãŒãªãƒ»ã‚«ã‚¿ã‚«ãƒŠãƒ»æ¼¢å­—ï¼‰ãŒå«ã¾ã‚Œã‚‹

2. **ç”»åƒãŒæ˜ã‚‰ã‹ã«å•†å“æ­£é¢ï¼ˆè‡ªæ’®ã‚Š/æ£šå†™çœŸã£ã½ã„ã®ã¯è‡ªå‹•æ¡ç”¨ã—ãªã„ï¼‰**
   - ç”»åƒURLã« \`front\` ãŒå«ã¾ã‚Œã‚‹
   - ã¾ãŸã¯ \`image_front_url\` ãŒå­˜åœ¨

**æ¡ä»¶ã‚’æº€ãŸã•ãªã„å ´åˆã®æŒ™å‹•**:
- è‡ªå‹•å…¥åŠ›ã¯ã—ãªã„ï¼ˆç©ºã®ã¾ã¾ï¼‰
- ä»£ã‚ã‚Šã« \`debug=1\` ã®ç”»é¢å†…ãƒ­ã‚°ã«ã€ŒOFFã¯è‹±èª/ç”»åƒå“è³ªã®ç†ç”±ã§æ¡ç”¨ã—ãªã„ã€ã‚’å‡ºã™
- é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒˆãƒ¼ã‚¹ãƒˆ1å›ã ã‘ã§OKï¼ˆUIè¿½åŠ ãªã—ï¼‰

**ã‚«ãƒ†ã‚´ãƒªè£œå®Œ**: ä»Šå›ã¯ã€Œå•†å“åãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»ç”»åƒã€ã ã‘ã«é™å®šï¼ˆã‚«ãƒ†ã‚´ãƒªè£œå®Œã¯æ¬¡æ®µéšï¼‰

---

### 4. \`processBarcodeData()\` ã®å„ªå…ˆé †ä½å¤‰æ›´

#### 4.1 å®Ÿè£…ãƒ•ãƒ­ãƒ¼

\`\`\`
1. Yahooæœ€å„ªå…ˆï¼ˆå•†å“èº«å…ƒæƒ…å ±ï¼‹ä¾¡æ ¼æƒ…å ±ï¼‰
   â†“
2. YahooçµæœãŒå¼±ã„/ç©ºãªã‚‰ â†’ æ¥½å¤©ã§è£œå®Œï¼ˆä¸è¶³é …ç›®ã®ã¿ï¼‰
   â†“
3. Yahooã‚‚æ¥½å¤©ã‚‚æœªå–å¾—ã®å ´åˆã®ã¿ â†’ OFFã‚’ä½¿ç”¨ï¼ˆæ¡ä»¶ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ï¼‰
\`\`\`

#### 4.2 ä¸Šæ›¸ãç¦æ­¢ãƒ«ãƒ¼ãƒ«

- **Yahooã§åŸ‹ã‚ãŸæƒ…å ±ã¯ã€æ¥½å¤©/OFFã§ä¸Šæ›¸ãã—ãªã„**
- **ä¾‹å¤–**: Yahooã®é …ç›®ãŒç©ºã®å ´åˆã®ã¿ã€ãã®é …ç›®ã ã‘æ¥½å¤©/OFFã§è£œå®Œ

#### 4.3 ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°

- \`[Yahoo] OK (å•†å“èº«å…ƒ+ä¾¡æ ¼)\`
- \`[æ¥½å¤©] è£œå®ŒOK\`
- \`[æ¡ç”¨] yahoo\` / \`yahoo+rakuten\` / \`rakuten\` / \`off\` / \`none\`

---

### 5. P0ï¼ˆæœ€å„ªå…ˆï¼‰ï¼šã‚«ãƒ¡ãƒ©ã®ãƒ”ãƒ³ãƒˆå•é¡Œå¯¾å¿œ

#### 5.1 ãªã¹ã•ã‚“å ±å‘Š

- **Xperia**: Web/PWAã©ã¡ã‚‰ã‚‚ãƒ”ãƒ³ãƒˆãŒåˆã„ã«ãã„ï¼ˆã‚«ãƒ¡ãƒ©ã‚¢ãƒ—ãƒªã¯æ­£å¸¸ï¼‰
- **Pixel**: èª­ã¿å–ã‚Šç²¾åº¦ãŒç”˜ã„å°è±¡
- **èª­ã¿å–ã‚Šâ†’å•†å“åæ˜ ã¾ã§ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚°**ã‚‚æœªè§£æ±º

#### 5.2 Rexå¯¾å¿œæ–¹é‡ï¼ˆUIå¢—ã‚„ã•ãªã„ï¼‰

**å®Ÿè£…å†…å®¹**:
- **èƒŒé¢ã‚«ãƒ¡ãƒ©å›ºå®š**: \`facingMode: "environment"\`ï¼ˆæ—¢å­˜ï¼‰
- **é€£ç¶šã‚ªãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹å„ªå…ˆ**: \`focusMode: "continuous"\`ï¼ˆå¯¾å¿œç«¯æœ«ã®ã¿ï¼‰
- **é€£ç¶šéœ²å‡ºèª¿æ•´**: \`exposureMode: "continuous"\`ï¼ˆå¯¾å¿œç«¯æœ«ã®ã¿ï¼‰
- **ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”æŒ‡å®š**: \`aspectRatio: { ideal: 16/9 }\`

**ã‚³ãƒ¼ãƒ‰å®Ÿè£…**:
\`\`\`javascript
const cameraConfig = {
  facingMode: "environment", // èƒŒé¢ã‚«ãƒ¡ãƒ©å›ºå®š
  aspectRatio: { ideal: 16/9 },
  focusMode: "continuous", // é€£ç¶šã‚ªãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹ï¼ˆå¯¾å¿œç«¯æœ«ã®ã¿ï¼‰
  advanced: [
    { focusMode: "continuous" }, // é€£ç¶šã‚ªãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹å„ªå…ˆ
    { exposureMode: "continuous" } // é€£ç¶šéœ²å‡ºèª¿æ•´
  ]
};
\`\`\`

**èª­ã¿å–ã‚Šå¾Œã®å‡¦ç†**: å…ˆã«UIã¸ä»®åæ˜ â†’è£ã§è£œå®Œï¼ˆé…å»¶ä½“æ„Ÿã‚’æ¸›ã‚‰ã™ï¼‰â†æ—¢å­˜å®Ÿè£…

---

## ğŸ“Š å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| \`Smart-Price-Book/dev/index.html\` | âœ… æ–°è¦é–¢æ•°è¿½åŠ ãƒ»æ—¢å­˜é–¢æ•°ä¿®æ­£ |

---

## ğŸ” ä¿®æ­£ç®‡æ‰€ã®è©³ç´°

### 1. æ–°è¦é–¢æ•°: \`normalizeMakerName(maker)\`

**å ´æ‰€**: \`normalizeYahooProductInfo()\` ã®å‰

**æ©Ÿèƒ½**: ãƒ¡ãƒ¼ã‚«ãƒ¼åã‹ã‚‰è²©å£²åº—åã‚’é™¤å»ï¼ˆæ±ç”¨åŒ–ï¼‰

---

### 2. ä¿®æ­£é–¢æ•°: \`normalizeYahooProductInfo(info)\`

**å¤‰æ›´ç‚¹**:
- ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ä»˜ãï¼ˆ\`trustScore\`ï¼‰
- \`packCount\` ã¨ \`isCase\` ã‚’ä¿æŒ
- ãƒ¡ãƒ¼ã‚«ãƒ¼åæ­£è¦åŒ–ã« \`normalizeMakerName()\` ã‚’ä½¿ç”¨

---

### 3. æ–°è¦é–¢æ•°: \`lookupRakutenByJan(jan, keyword = null)\`

**å ´æ‰€**: \`lookupOffByJan()\` ã®å¾Œã€\`lookupYahooByJan()\` ã®å‰

**æ©Ÿèƒ½**: æ¥½å¤©APIï¼ˆYahoo ProxyçµŒç”±ï¼‰ã‹ã‚‰å•†å“æƒ…å ±ã‚’å–å¾—

---

### 4. ä¿®æ­£é–¢æ•°: \`lookupOffByJan(jan)\`

**å¤‰æ›´ç‚¹**:
- æ¡ä»¶ãƒã‚§ãƒƒã‚¯è¿½åŠ ï¼ˆæ—¥æœ¬èªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€ç”»åƒå“è³ªï¼‰
- æ¡ä»¶ã‚’æº€ãŸã•ãªã„å ´åˆã¯è‡ªå‹•å…¥åŠ›ã—ãªã„

---

### 5. ä¿®æ­£é–¢æ•°: \`processBarcodeData(code)\`

**å¤‰æ›´ç‚¹**:
- å„ªå…ˆé †ä½å¤‰æ›´ï¼ˆYahooæœ€å„ªå…ˆâ†’æ¥½å¤©ç¬¬2â†’OFFç¬¬3ï¼‰
- ä¸Šæ›¸ãç¦æ­¢ãƒ«ãƒ¼ãƒ«å®Ÿè£…
- ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°è¿½åŠ ï¼ˆã©ã®ã‚½ãƒ¼ã‚¹ã‚’æ¡ç”¨ã—ãŸã‹ï¼‰

---

### 6. ä¿®æ­£é–¢æ•°: \`startScanner()\`

**å¤‰æ›´ç‚¹**:
- ã‚«ãƒ¡ãƒ©è¨­å®šã‚’æ‹¡å¼µï¼ˆé€£ç¶šã‚ªãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã€é€£ç¶šéœ²å‡ºèª¿æ•´ï¼‰

---

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### âœ… å•†å“æƒ…å ±ã®å“è³ªå‘ä¸Š

- **Yahooæœ€å„ªå…ˆ**: ç¾çŠ¶ã®ä»•çµ„ã¿ã‚’ç¶­æŒã—ã¤ã¤ã€ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ã§å“è³ªã‚’åˆ¤å®š
- **æ¥½å¤©è£œå®Œ**: æ—¥æœ¬èªåãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»ç”»åƒã®å“è³ªãŒå®‰å®š
- **OFFã¯æœ€å¾Œã®ä¿é™º**: è‹±èªåãƒ»è‡ªæ’®ã‚Šç”»åƒã®å•é¡Œã‚’å›é¿

### âœ… ã‚«ãƒ¡ãƒ©ã®ãƒ”ãƒ³ãƒˆå•é¡Œæ”¹å–„

- **é€£ç¶šã‚ªãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹**: å¯¾å¿œç«¯æœ«ã§ãƒ”ãƒ³ãƒˆãŒåˆã„ã‚„ã™ããªã‚‹
- **èƒŒé¢ã‚«ãƒ¡ãƒ©å›ºå®š**: ä¸€è²«ã—ãŸèª­ã¿å–ã‚Šç’°å¢ƒ

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¦³ç‚¹

### A. é€šå¸¸ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆPC Chrome/Edgeï¼‰

1. **JANã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›** â†’ Yahooå–å¾—æˆåŠŸ â†’ å•†å“åãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»ç”»åƒãŒYahooç”±æ¥ã§è¡¨ç¤ºã•ã‚Œã‚‹
2. **JANã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›** â†’ Yahooå¼±ã„ â†’ æ¥½å¤©ã§è£œå®Œ â†’ ä¸è¶³é …ç›®ãŒè£œå®Œã•ã‚Œã‚‹
3. **JANã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›** â†’ Yahoo/æ¥½å¤©å¤±æ•— â†’ OFFã§å–å¾—ï¼ˆæ¡ä»¶ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ï¼‰

### B. PWA/ã‚¹ãƒãƒ›

1. **ã‚¹ã‚­ãƒ£ãƒ³** â†’ Yahooå–å¾—æˆåŠŸ â†’ å•†å“æƒ…å ±ãŒYahooç”±æ¥ã§è¡¨ç¤ºã•ã‚Œã‚‹
2. **ã‚¹ã‚­ãƒ£ãƒ³** â†’ ãƒ”ãƒ³ãƒˆãŒåˆã„ã‚„ã™ããªã‚‹ï¼ˆé€£ç¶šã‚ªãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹ï¼‰
3. **æ‰‹å…¥åŠ›** â†’ å„ªå…ˆé †ä½é€šã‚Šã«å–å¾—ã•ã‚Œã‚‹

### C. debug=1

1. **Yahooå–å¾—æˆåŠŸ**: \`[Yahoo] OK (å•†å“èº«å…ƒ+ä¾¡æ ¼)\` ãŒè¡¨ç¤ºã•ã‚Œã‚‹
2. **æ¥½å¤©è£œå®Œ**: \`[æ¥½å¤©] è£œå®ŒOK\` ãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. **OFFæ¡ç”¨/ä¸æ¡ç”¨**: \`[OFF] OK ...\` ã¾ãŸã¯ \`[OFF] è‹±èª/ç”»åƒå“è³ªã®ç†ç”±ã§æ¡ç”¨ã—ãªã„\` ãŒè¡¨ç¤ºã•ã‚Œã‚‹
4. **æ¡ç”¨ã‚½ãƒ¼ã‚¹**: \`[æ¡ç”¨] yahoo\` / \`yahoo+rakuten\` / \`rakuten\` / \`off\` / \`none\` ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## ğŸ“ æ³¨æ„äº‹é …

### âš ï¸ æ¥½å¤©APIã®å®Ÿè£…

- **Yahoo ProxyçµŒç”±**: æ¥½å¤©APIã¯ç›´æ¥å‘¼ã³å‡ºã•ãšã€Yahoo ProxyçµŒç”±ã§å–å¾—
- **GASå´ã®å®Ÿè£…**: \`action=rakuten\` ã®å®Ÿè£…ãŒå¿…è¦ï¼ˆä»Šå›ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ã¿ï¼‰

### âš ï¸ OFF APIã®åˆ¶é™

- **æ¡ä»¶ãƒã‚§ãƒƒã‚¯**: æ—¥æœ¬èªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ»ç”»åƒå“è³ªã®æ¡ä»¶ã‚’æº€ãŸã•ãªã„å ´åˆã¯è‡ªå‹•å…¥åŠ›ã—ãªã„
- **ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°**: æ¡ä»¶ã‚’æº€ãŸã•ãªã„ç†ç”±ã‚’ \`debug=1\` ã§è¡¨ç¤º

### âš ï¸ ã‚«ãƒ¡ãƒ©è¨­å®š

- **å¯¾å¿œç«¯æœ«ã®ã¿**: é€£ç¶šã‚ªãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ»é€£ç¶šéœ²å‡ºèª¿æ•´ã¯å¯¾å¿œç«¯æœ«ã®ã¿æœ‰åŠ¹
- **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: å¯¾å¿œã—ã¦ã„ãªã„ç«¯æœ«ã§ã¯æ—¢å­˜ã®å‹•ä½œã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æƒ…å ±

### æ¤œè¨¼URL

**é€šå¸¸URL**:
\`\`\`
https://smart-price-official.github.io/Smart-Price-Book/dev/?b=2026-01-15_1400_yahoo-rakuten-off
\`\`\`

**ãƒ‡ãƒãƒƒã‚°URL**:
\`\`\`
https://smart-price-official.github.io/Smart-Price-Book/dev/?b=2026-01-15_1400_yahoo-rakuten-off&debug=1
\`\`\`

---

## ğŸ“Œ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

1. **æ¥½å¤©APIï¼ˆGASå´ï¼‰**: \`action=rakuten\` ã®å®Ÿè£…ãŒå¿…è¦
2. **ä¾¡æ ¼DBã®æ‹¡å¼µ**: Open Pricesï¼ˆOpen Food Factsç³»ã®å§‰å¦¹ï¼‰ã®èª¿æŸ»
3. **ã‚«ãƒ†ã‚´ãƒªè£œå®Œ**: OFFã®ã‚«ãƒ†ã‚´ãƒªæƒ…å ±ã‚’æ´»ç”¨ï¼ˆæ¬¡æ®µéšï¼‰

---

**ä»¥ä¸Š**`;

    async function uploadToGitHub() {
      const statusDiv = document.getElementById('status');
      
      try {
        // Step 1: ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        await navigator.clipboard.writeText(reportContent);
        statusDiv.innerHTML = 'âœ… Step 1: ä¿®æ­£å ±å‘Šæ›¸ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
        statusDiv.style.display = 'block';
        
        // Step 2: GitHubã®ã€ŒCreate new fileã€ãƒšãƒ¼ã‚¸ã‚’é–‹ã
        setTimeout(() => {
          const githubUrl = 'https://github.com/smart-price-official/Smart-Price-Book/new/patch';
          window.open(githubUrl, '_blank', 'noopener');
          
          statusDiv.innerHTML = 'âœ… Step 2: GitHubã®ç·¨é›†ç”»é¢ã‚’é–‹ãã¾ã—ãŸï¼<br>ç·¨é›†ç”»é¢ã§ <strong>Ctrl + V</strong> ã‚’æŠ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚';
        }, 500);
        
      } catch(err) {
        alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚\n\n' + err.message + '\n\næ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
      }
    }
  </script>
</body>
</html>
