<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¿®æ­£å ±å‘Šæ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ v19.9.18</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 900px;
      margin: 30px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      border-bottom: 3px solid #D50000;
      padding-bottom: 10px;
    }
    .button-large {
      display: block;
      width: 100%;
      background: #D50000;
      color: white;
      padding: 20px;
      font-size: 20px;
      font-weight: bold;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 20px 0;
      text-decoration: none;
      text-align: center;
      transition: background 0.3s;
    }
    .button-large:hover {
      background: #9b0000;
    }
    .button-large:active {
      transform: scale(0.98);
    }
    .info {
      background: #e3f2fd;
      padding: 15px;
      border-left: 4px solid #2196F3;
      margin: 20px 0;
      border-radius: 5px;
    }
    .step {
      background: #f9f9f9;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      border-left: 4px solid #4CAF50;
    }
    .step h3 {
      margin-top: 0;
      color: #4CAF50;
    }
    .code {
      background: #f5f5f5;
      padding: 10px;
      border-radius: 5px;
      font-family: 'Courier New', monospace;
      margin: 10px 0;
      word-break: break-all;
      font-size: 12px;
    }
    .success {
      background: #e8f5e9;
      color: #2e7d32;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
      display: none;
    }
    .warning {
      background: #fff3cd;
      color: #856404;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸš€ ä¿®æ­£å ±å‘Šæ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ v19.9.18</h1>
    
    <div class="info">
      <strong>ğŸ“‹ ä½¿ã„æ–¹ï¼š</strong><br>
      ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ä¿®æ­£å ±å‘Šæ›¸ã®å†…å®¹ãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã€GitHubã®ã€ŒCreate new fileã€ãƒšãƒ¼ã‚¸ãŒè‡ªå‹•çš„ã«é–‹ãã¾ã™ã€‚
    </div>

    <div class="warning">
      <strong>âš ï¸ æ³¨æ„ï¼š</strong><br>
      GitHubã®ç·¨é›†ç”»é¢ãŒé–‹ã„ãŸã‚‰ã€<strong>Ctrl + V</strong> ã§è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚
    </div>

    <div class="step">
      <h3>ğŸ“‹ ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
      <button class="button-large" onclick="uploadToGitHub()">
        ğŸš€ patchãƒ–ãƒ©ãƒ³ãƒã«ä¿®æ­£å ±å‘Šæ›¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
      </button>
      <div id="status" class="success"></div>
    </div>

    <div class="step">
      <h3>ğŸ“ æ‰‹é †ï¼ˆè‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ï¼‰</h3>
      <ol>
        <li>âœ… ä¿®æ­£å ±å‘Šæ›¸ã®å†…å®¹ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼</li>
        <li>âœ… GitHubã®ã€ŒCreate new fileã€ãƒšãƒ¼ã‚¸ã‚’é–‹ã</li>
        <li>â³ ãƒ•ã‚¡ã‚¤ãƒ«åã«ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š
          <div class="code">ä¿®æ­£å ±å‘Šæ›¸_v19.9.18-hf28-p0-camera-lag.md</div>
        </li>
        <li>â³ ç·¨é›†ç”»é¢ã§ <strong>Ctrl + V</strong> ã‚’æŠ¼ã—ã¦è²¼ã‚Šä»˜ã‘</li>
        <li>â³ ç”»é¢ä¸‹éƒ¨ã®ã€Œ<strong>Commit new file</strong>ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
        <li>â³ ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š
          <div class="code">v19.9.18: P0ä¿®æ­£ï¼ˆã‚«ãƒ¡ãƒ©ãƒ”ãƒ³ãƒˆ/ã‚¿ã‚¤ãƒ ãƒ©ã‚°ï¼‰</div>
        </li>
        <li>â³ ã€Œ<strong>Commit new file</strong>ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
      </ol>
    </div>

    <div class="info">
      <strong>âœ… å®Œäº†ï¼</strong><br>
      ä¿å­˜å¾Œã€patchãƒ–ãƒ©ãƒ³ãƒã«ä¿®æ­£å ±å‘Šæ›¸ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚
    </div>
  </div>

  <script>
    const reportContent = `# ğŸ”§ Smart Price ä¿®æ­£å ±å‘Šæ›¸

**TO**: ãƒ¦ã‚¤ï¼ˆç›£ç£ï¼‰ã€ãªã¹ã•ã‚“ï¼ˆå®Ÿæ©Ÿæ¤œè¨¼ï¼‰  
**FROM**: Rex  
**DATE(JST)**: 2026-01-15 17:40 JST  
**VERSION**: v19.9.18-hf28-p0-camera-lag  
**BUILD_ID**: 2026-01-15_1400_yahoo-rakuten-off

---

## ğŸ“‹ ä»Šå›ã®ä¿®æ­£ã‚¹ã‚³ãƒ¼ãƒ—

**ãƒ¦ã‚¤æŒ‡ç¤º**: commit 3090258ï¼ˆv19.9.17-hf27ï¼‰ã‚’"å®Ÿæ©ŸãŒè¦‹ã¦ã„ã‚‹å ´æ‰€"ã¸åæ˜ ï¼‹ã‚«ãƒ¡ãƒ©/é…å»¶ã®P0ä¿®æ­£

**æ–¹é‡**: UIå¤‰æ›´ç¦æ­¢ï¼ˆè¦‹ãŸç›®ãƒ»æ–‡è¨€ãƒ»é…ç½®ãã®ã¾ã¾ï¼‰ã€‚å†…éƒ¨ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿ã€‚

---

## âœ… å®Ÿæ–½å†…å®¹

### A. commit 3090258ã®åæ˜ ç¢ºèª

**çŠ¶æ³**: \`dev/index.html\` ã¯æ—¢ã« v19.9.17 ã®å†…å®¹ãŒåæ˜ æ¸ˆã¿

**ç¢ºèªé …ç›®**:
- âœ… BUILD_ID: \`2026-01-15_1400_yahoo-rakuten-off\` ã§çµ±ä¸€
- âœ… å„ªå…ˆé †ä½: Yahooæœ€å„ªå…ˆâ†’æ¥½å¤©ç¬¬2â†’OFFç¬¬3
- âœ… Yahooå´ã®å¼·åŒ–ï¼ˆä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ä»˜ãã€packCount/isCaseä¿æŒï¼‰
- âœ… ãƒ¡ãƒ¼ã‚«ãƒ¼å/è²©å£²åº—åæ··å…¥ã®æ­£è¦åŒ–é–¢æ•°ã‚’æ±ç”¨åŒ–
- âœ… å›½å†…DBï¼ˆæ¥½å¤©ï¼‰ã®å°å…¥
- âœ… OFFã®ä½¿ã„æ–¹ãƒ«ãƒ¼ãƒ«å®Ÿè£…

**ç›®æ¨™**: \`.../dev/?b=2026-01-15_1400_yahoo-rakuten-off\` ã‚’é–‹ã„ãŸã¨ãã«ã€UIä¸Šã®VERSIONãŒ v19.9.18 ã«ãªã‚‹ã“ã¨

---

### B. P0: ã‚«ãƒ¡ãƒ©ã®ãƒ”ãƒ³ãƒˆå•é¡Œä¿®æ­£

#### å•é¡Œ
- **Xperia**: Web/PWAã©ã¡ã‚‰ã‚‚ãƒ”ãƒ³ãƒˆãŒåˆã„ã«ãã„ï¼ˆã‚«ãƒ¡ãƒ©ã‚¢ãƒ—ãƒªã¯æ­£å¸¸ï¼‰
- **Pixel**: èª­ã¿å–ã‚Šç²¾åº¦ãŒç”˜ã„å°è±¡
- **åŸå› **: ç´°ã„ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ï¼ˆç®±ã®å´é¢ï¼‰ã§è§£åƒåº¦ãŒè¶³ã‚Šãšã€AFï¼ˆè‡ªå‹•ãƒ”ãƒ³ãƒˆï¼‰ãŒè¿·ã†

#### å®Ÿè£…å†…å®¹

**1. getUserMedia ã¯æœ€åˆã¯å®‰å…¨ã«å–å¾—ï¼ˆè½ã¡ã«ãã„æ¡ä»¶ï¼‰**
\`\`\`javascript
const cameraConfig = {
  facingMode: "environment", // èƒŒé¢ã‚«ãƒ¡ãƒ©å›ºå®š
  width: { ideal: 1920, min: 1280 }, // è§£åƒåº¦ï¼šideal 1920Ã—1080ï¼ˆæœ€ä½1280Ã—720ï¼‰
  height: { ideal: 1080, min: 720 },
  aspectRatio: { ideal: 16/9 }
};
\`\`\`

**2. å–å¾—ã§ããŸã‚‰ track.applyConstraints() ã‚’æ®µéšçš„ã«try**
\`\`\`javascript
const constraints = [
  { focusMode: "continuous" }, // é€£ç¶šã‚ªãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹å„ªå…ˆ
  { exposureMode: "continuous" }, // é€£ç¶šéœ²å‡ºèª¿æ•´
  { zoom: 1.2 } // æ§ãˆã‚ãªã‚ºãƒ¼ãƒ ï¼ˆå¯¾å¿œç«¯æœ«ã®ã¿ï¼‰
];

for (let i = 0; i < constraints.length; i++) {
  try {
    await track.applyConstraints({ advanced: [constraints[i]] });
    // æˆåŠŸæ™‚ã¯debug=1ã§ãƒ­ã‚°
  } catch(e) {
    // å¤±æ•—ã—ã¦ã‚‚æ¡ã‚Šã¤ã¶ã—ã¦ç¶™ç¶š
  }
}
\`\`\`

**3. debug=1 ã®ã¨ãã ã‘ã€Œã©ã®constraintãŒé€šã£ãŸ/è½ã¡ãŸã€ã‚’ç”»é¢å†…ãƒ­ã‚°**
- \`[Camera] Constraint 1 OK: focusMode\`
- \`[Camera] Constraint 2 OK: exposureMode\`
- \`[Camera] Constraint 3 failed: zoom\`ï¼ˆå¯¾å¿œã—ã¦ã„ãªã„å ´åˆï¼‰

---

### C. P0: ã‚¿ã‚¤ãƒ ãƒ©ã‚°å•é¡Œä¿®æ­£

#### å•é¡Œ
- ã€Œå–å¾—ãŒçµ‚ã‚ã‚‹ã¾ã§ç”»é¢ãŒé™æ­¢ã€ã—ã¦ã‚‹ã®ãŒä½“æ„Ÿé…å»¶ã®æ­£ä½“

#### å®Ÿè£…å†…å®¹

**1. åŒä¸€JANã®äºŒé‡ç™ºç«ã‚’æ­¢ã‚ã‚‹ï¼ˆé€£ç¶šèª­å–ã‚Šå¯¾ç­–ï¼‰**
\`\`\`javascript
let processBarcodeInFlight = new Set(); // å‡¦ç†ä¸­ã®JANã‚’è¨˜éŒ²

if (processBarcodeInFlight.has(jan)) {
  return; // æ—¢ã«å‡¦ç†ä¸­ãªã‚‰ã‚¹ã‚­ãƒƒãƒ—
}
processBarcodeInFlight.add(jan);
\`\`\`

**2. èª­ã‚ãŸç¬é–“ã«"å…ˆã«ç”»é¢ã‚’å‹•ã‹ã™"**
- \`openForm(code)\` ã‚’å…ˆã«å‘¼ã³å‡ºã™ï¼ˆæ—¢å­˜ï¼‰
- JANè¡¨ç¤º: \`showToast(\\\`JAN: ${jan}\\\`, 2000)\`
- å–å¾—ä¸­ãƒˆãƒ¼ã‚¹ãƒˆ: \`nameInput.placeholder = 'å•†å“æƒ…å ±ã‚’å–å¾—ä¸­â€¦'\`
- å…¥åŠ›æ¬„ã‚’è§¦ã‚Œã‚‹çŠ¶æ…‹ã«ã™ã‚‹ï¼ˆæ—¢å­˜ï¼‰

**3. å¤ã„çµæœã®ä¸Šæ›¸ãé˜²æ­¢**
\`\`\`javascript
const currentJan = String(curBarcode || '').trim();
if (currentJan !== jan) {
  return; // ç¾åœ¨ã®JANã¨ä¸€è‡´ã—ãªã„å ´åˆã¯åæ˜ ã—ãªã„
}
\`\`\`

**4. fetch ã¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼‹AbortControllerï¼ˆæ—¢å­˜å®Ÿè£…ï¼‰**
- \`lookupYahooByJan()\` ã¯æ—¢ã«12ç§’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå®Ÿè£…æ¸ˆã¿

**5. JANâ†’å•†å“æƒ…å ±ã®ç°¡æ˜“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆæ—¢å­˜å®Ÿè£…ï¼‰**
- \`lookupYahooByJan()\` ã¯æ—¢ã«7æ—¥é–“ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Ÿè£…æ¸ˆã¿

**6. å‡¦ç†å®Œäº†æ™‚ã«ãƒ•ãƒ©ã‚°ã‚’è§£é™¤**
\`\`\`javascript
finally {
  processBarcodeInFlight.delete(jan);
}
\`\`\`

---

### D. æ¥½å¤©APIæœªå®Ÿè£…æ™‚ã®å¯¾å¿œ

#### å•é¡Œ
- Proxyå´ \`action=rakuten\` ãŒæœªå®Ÿè£…ãªã‚‰ã€å‘¼ã³å‡ºã—ã§å›ºã¾ã‚‹åŸå› ã«ãªã‚Šã‚„ã™ã„

#### å®Ÿè£…å†…å®¹

**å³nullè¿”ã—ï¼ˆç„¡åŠ¹ï¼‰ã«ã—ã¦ã€debug=1ã®ã¨ãã ã‘ãƒ­ã‚°ã§åˆ†ã‹ã‚‹ã‚ˆã†ã«**
\`\`\`javascript
if (!res.ok) {
  // Proxyå´ãŒæœªå®Ÿè£…ï¼ˆ404/500ç­‰ï¼‰ãªã‚‰å³nullè¿”ã—
  if (isDebug()) {
    showToast(\`[æ¥½å¤©] Proxyæœªå®Ÿè£…ã®å¯èƒ½æ€§ (HTTP ${res.status})\`, 5000);
  }
  return null; // å³nullè¿”ã—ï¼ˆç„¡åŠ¹ï¼‰
}

if (!json || !json.ok) {
  // Proxyå´ãŒæœªå®Ÿè£…ï¼ˆok:falseç­‰ï¼‰ãªã‚‰å³nullè¿”ã—
  if (isDebug()) {
    showToast(\`[æ¥½å¤©] Proxyæœªå®Ÿè£…ã®å¯èƒ½æ€§ (ok:false)\`, 5000);
  }
  return null; // å³nullè¿”ã—ï¼ˆç„¡åŠ¹ï¼‰
}
\`\`\`

**ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚å³nullè¿”ã—**
\`\`\`javascript
catch(e) {
  // Proxyæœªå®Ÿè£…ã®å¯èƒ½æ€§ â†’ å³nullè¿”ã—
  if (isDebug()) {
    showToast(\`[æ¥½å¤©] Proxyæœªå®Ÿè£…ã®å¯èƒ½æ€§ (${errorDetail})\`, 5000);
  }
  return null; // å³nullè¿”ã—ï¼ˆç„¡åŠ¹ï¼‰
}
\`\`\`

---

## ğŸ“Š å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| \`Smart-Price-Book/dev/index.html\` | âœ… P0ä¿®æ­£ï¼ˆã‚«ãƒ¡ãƒ©ãƒ”ãƒ³ãƒˆ/ã‚¿ã‚¤ãƒ ãƒ©ã‚°ï¼‰ |

---

## ğŸ” ä¿®æ­£ç®‡æ‰€ã®è©³ç´°

### 1. æ–°è¦å¤‰æ•°: \`processBarcodeInFlight\`

**å ´æ‰€**: \`curBarcode\` ã®å®šç¾©ã®å¾Œ

**æ©Ÿèƒ½**: åŒä¸€JANã®äºŒé‡ç™ºç«é˜²æ­¢ï¼ˆSetã§å‡¦ç†ä¸­ã®JANã‚’è¨˜éŒ²ï¼‰

---

### 2. ä¿®æ­£é–¢æ•°: \`startScanner()\`

**å¤‰æ›´ç‚¹**:
- è§£åƒåº¦æŒ‡å®šã‚’è¿½åŠ ï¼ˆideal 1920Ã—1080ã€æœ€ä½1280Ã—720ï¼‰
- \`track.applyConstraints()\` ã§æ®µéšçš„ã«åˆ¶ç´„é©ç”¨
- debug=1ã§ã©ã®constraintãŒé€šã£ãŸ/è½ã¡ãŸã‹ã‚’ç”»é¢å†…ãƒ­ã‚°ã«è¡¨ç¤º

---

### 3. ä¿®æ­£é–¢æ•°: \`processBarcodeData(code)\`

**å¤‰æ›´ç‚¹**:
- åŒä¸€JANã®äºŒé‡ç™ºç«é˜²æ­¢ï¼ˆ\`processBarcodeInFlight\`ï¼‰
- å¤ã„çµæœã®ä¸Šæ›¸ãé˜²æ­¢ï¼ˆç¾åœ¨ã®JANã¨ä¸€è‡´ã™ã‚‹æ™‚ã ã‘åæ˜ ï¼‰
- JANè¡¨ç¤ºã‚’è¿½åŠ ï¼ˆ\`showToast(\\\`JAN: ${jan}\\\`, 2000)\`ï¼‰
- å‡¦ç†å®Œäº†æ™‚ã«ãƒ•ãƒ©ã‚°ã‚’è§£é™¤ï¼ˆ\`finally\`ï¼‰

---

### 4. ä¿®æ­£é–¢æ•°: \`lookupRakutenByJan(jan, keyword = null)\`

**å¤‰æ›´ç‚¹**:
- Proxyæœªå®Ÿè£…æ™‚ã®å¯¾å¿œï¼ˆHTTPã‚¨ãƒ©ãƒ¼/ok:false/ä¾‹å¤–æ™‚ã¯å³nullè¿”ã—ï¼‰
- debug=1ã§ã€ŒProxyæœªå®Ÿè£…ã®å¯èƒ½æ€§ã€ã‚’ç”»é¢å†…ãƒ­ã‚°ã«è¡¨ç¤º

---

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### âœ… ã‚«ãƒ¡ãƒ©ã®ãƒ”ãƒ³ãƒˆå•é¡Œæ”¹å–„

- **è§£åƒåº¦æŒ‡å®š**: ç´°ã„ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã§ã‚‚èª­ã¿å–ã‚Šç²¾åº¦ãŒå‘ä¸Š
- **æ®µéšçš„åˆ¶ç´„é©ç”¨**: å¯¾å¿œç«¯æœ«ã§é€£ç¶šã‚ªãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ»é€£ç¶šéœ²å‡ºèª¿æ•´ãŒæœ‰åŠ¹
- **ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°**: ã©ã®constraintãŒé€šã£ãŸ/è½ã¡ãŸã‹ãŒåˆ†ã‹ã‚‹

### âœ… ã‚¿ã‚¤ãƒ ãƒ©ã‚°å•é¡Œæ”¹å–„

- **å³åº§ã«ç”»é¢ã‚’å‹•ã‹ã™**: èª­ã‚ãŸç¬é–“ã«JANè¡¨ç¤ºãƒ»å–å¾—ä¸­ãƒˆãƒ¼ã‚¹ãƒˆãƒ»å…¥åŠ›æ¬„ã‚’è§¦ã‚Œã‚‹çŠ¶æ…‹
- **äºŒé‡ç™ºç«é˜²æ­¢**: é€£ç¶šèª­å–ã‚Šã§å›ºã¾ã‚‰ãªã„
- **å¤ã„çµæœã®ä¸Šæ›¸ãé˜²æ­¢**: ç¾åœ¨ã®JANã¨ä¸€è‡´ã™ã‚‹æ™‚ã ã‘åæ˜ 

### âœ… æ¥½å¤©APIæœªå®Ÿè£…æ™‚ã®å®‰å…¨æ€§

- **å³nullè¿”ã—**: Proxyæœªå®Ÿè£…ã§ã‚‚å›ºã¾ã‚‰ãªã„
- **ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°**: debug=1ã§åŸå› ãŒåˆ†ã‹ã‚‹

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¦³ç‚¹ï¼ˆãªã¹ã•ã‚“å‘ã‘ï¼‰

### A. dev URLï¼ˆé€šå¸¸/ãƒ‡ãƒãƒƒã‚°ï¼‰

**é€šå¸¸URL**:
\`\`\`
https://smart-price-official.github.io/Smart-Price-Book/dev/?b=2026-01-15_1400_yahoo-rakuten-off
\`\`\`

**ãƒ‡ãƒãƒƒã‚°URL**:
\`\`\`
https://smart-price-official.github.io/Smart-Price-Book/dev/?b=2026-01-15_1400_yahoo-rakuten-off&debug=1
\`\`\`

**ç¢ºèªé …ç›®**:
- UIä¸Šã®VERSIONãŒ \`v19.9.18\` ã«ãªã£ã¦ã„ã‚‹ã“ã¨

---

### B. Xperiaã§ã€Œç´°ã„ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã€ãŒèª­ã‚ãŸã‹ï¼ˆ3å›ï¼‰

**ãƒ†ã‚¹ãƒˆæ‰‹é †**:
1. Xperiaã§ã‚¢ãƒ—ãƒªã‚’é–‹ã
2. ç´°ã„ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ï¼ˆç®±ã®å´é¢ãªã©ï¼‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³
3. 3å›è©¦ã—ã¦ã€èª­ã¿å–ã‚ŠæˆåŠŸç‡ã‚’ç¢ºèª

**æœŸå¾…çµæœ**:
- ãƒ”ãƒ³ãƒˆãŒåˆã„ã‚„ã™ããªã‚Šã€èª­ã¿å–ã‚ŠæˆåŠŸç‡ãŒå‘ä¸Š

**debug=1 ã®ãƒ­ã‚°ç¢ºèª**:
- \`[Camera] Constraint 1 OK: focusMode\`
- \`[Camera] Constraint 2 OK: exposureMode\`
- ãªã©ã€ã©ã®constraintãŒé€šã£ãŸ/è½ã¡ãŸã‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

### C. "èª­ã¿å–ã‚Šâ†’ç”»é¢åæ˜ " ãŒä½•ç§’ã«ãªã£ãŸã‹ï¼ˆä½“æ„Ÿã§OKï¼‰

**ãƒ†ã‚¹ãƒˆæ‰‹é †**:
1. ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³
2. èª­ã¿å–ã‚ŠæˆåŠŸã‹ã‚‰ç”»é¢åæ˜ ã¾ã§ã®æ™‚é–“ã‚’ä½“æ„Ÿã§æ¸¬å®š

**æœŸå¾…çµæœ**:
- èª­ã‚ãŸç¬é–“ã«JANè¡¨ç¤ºãƒ»å–å¾—ä¸­ãƒˆãƒ¼ã‚¹ãƒˆãƒ»å…¥åŠ›æ¬„ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- ä½“æ„Ÿã§1-2ç§’ä»¥å†…ã«ç”»é¢ãŒå‹•ãå§‹ã‚ã‚‹

**ç¢ºèªé …ç›®**:
- \`showToast(\\\`JAN: ${jan}\\\`, 2000)\` ãŒå³åº§ã«è¡¨ç¤ºã•ã‚Œã‚‹
- \`nameInput.placeholder = 'å•†å“æƒ…å ±ã‚’å–å¾—ä¸­â€¦'\` ãŒå³åº§ã«è¡¨ç¤ºã•ã‚Œã‚‹
- å…¥åŠ›æ¬„ã‚’è§¦ã‚Œã‚‹çŠ¶æ…‹ã«ãªã‚‹

---

### D. debug=1 ã®ãƒ­ã‚°1æšã‚¹ã‚¯ã‚·ãƒ§

**ç¢ºèªé …ç›®**:
- \`[Camera] Constraint X OK: ...\` ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- \`[æ¡ç”¨] yahoo\` / \`yahoo+rakuten\` / \`rakuten\` / \`off\` / \`none\` ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- \`[æ¥½å¤©] Proxyæœªå®Ÿè£…ã®å¯èƒ½æ€§\` ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆProxyæœªå®Ÿè£…ã®å ´åˆï¼‰

---

## ğŸ“ æ³¨æ„äº‹é …

### âš ï¸ ã‚«ãƒ¡ãƒ©è¨­å®š

- **å¯¾å¿œç«¯æœ«ã®ã¿**: é€£ç¶šã‚ªãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ»é€£ç¶šéœ²å‡ºèª¿æ•´ãƒ»ã‚ºãƒ¼ãƒ ã¯å¯¾å¿œç«¯æœ«ã®ã¿æœ‰åŠ¹
- **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: å¯¾å¿œã—ã¦ã„ãªã„ç«¯æœ«ã§ã¯æ—¢å­˜ã®å‹•ä½œã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- **ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°**: debug=1ã§ã©ã®constraintãŒé€šã£ãŸ/è½ã¡ãŸã‹ãŒåˆ†ã‹ã‚‹

### âš ï¸ æ¥½å¤©API

- **Proxyæœªå®Ÿè£…æ™‚**: å³nullè¿”ã—ã§å›ºã¾ã‚‰ãªã„
- **ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°**: debug=1ã§ã€ŒProxyæœªå®Ÿè£…ã®å¯èƒ½æ€§ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### âš ï¸ ã‚¿ã‚¤ãƒ ãƒ©ã‚°å¯¾ç­–

- **äºŒé‡ç™ºç«é˜²æ­¢**: é€£ç¶šèª­å–ã‚Šã§å›ºã¾ã‚‰ãªã„
- **å¤ã„çµæœã®ä¸Šæ›¸ãé˜²æ­¢**: ç¾åœ¨ã®JANã¨ä¸€è‡´ã™ã‚‹æ™‚ã ã‘åæ˜ 
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: åŒã˜JANã‚’å†åº¦ã‚¹ã‚­ãƒ£ãƒ³ã—ãŸå ´åˆã¯å³åº§ã«è¡¨ç¤ºï¼ˆæ—¢å­˜å®Ÿè£…ï¼‰

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æƒ…å ±

### æ¤œè¨¼URL

**é€šå¸¸URL**:
\`\`\`
https://smart-price-official.github.io/Smart-Price-Book/dev/?b=2026-01-15_1400_yahoo-rakuten-off
\`\`\`

**ãƒ‡ãƒãƒƒã‚°URL**:
\`\`\`
https://smart-price-official.github.io/Smart-Price-Book/dev/?b=2026-01-15_1400_yahoo-rakuten-off&debug=1
\`\`\`

---

## ğŸ“Œ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **ãªã¹ã•ã‚“ã®å®Ÿæ©Ÿæ¤œè¨¼**: Xperiaã§ç´°ã„ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ãŒèª­ã‚ã‚‹ã‹ï¼ˆ3å›ï¼‰
2. **ã‚¿ã‚¤ãƒ ãƒ©ã‚°æ¸¬å®š**: èª­ã¿å–ã‚Šâ†’ç”»é¢åæ˜ ãŒä½•ç§’ã«ãªã£ãŸã‹ï¼ˆä½“æ„Ÿï¼‰
3. **debug=1 ã®ãƒ­ã‚°ç¢ºèª**: ã‚¹ã‚¯ã‚·ãƒ§1æš

---

**ä»¥ä¸Š**`;

    async function uploadToGitHub() {
      const statusDiv = document.getElementById('status');
      
      try {
        // Step 1: ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        await navigator.clipboard.writeText(reportContent);
        statusDiv.innerHTML = 'âœ… Step 1: ä¿®æ­£å ±å‘Šæ›¸ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
        statusDiv.style.display = 'block';
        
        // Step 2: GitHubã®ã€ŒCreate new fileã€ãƒšãƒ¼ã‚¸ã‚’é–‹ã
        setTimeout(() => {
          const githubUrl = 'https://github.com/smart-price-official/Smart-Price-Book/new/patch';
          window.open(githubUrl, '_blank', 'noopener');
          
          statusDiv.innerHTML = 'âœ… Step 2: GitHubã®ç·¨é›†ç”»é¢ã‚’é–‹ãã¾ã—ãŸï¼<br>ç·¨é›†ç”»é¢ã§ <strong>Ctrl + V</strong> ã‚’æŠ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚';
        }, 500);
        
      } catch(err) {
        alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚\n\n' + err.message + '\n\næ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
      }
    }
  </script>
</body>
</html>
