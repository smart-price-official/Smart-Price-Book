# 📁 Smart Price ファイル管理ルール

**作成日**: 2026-01-15 23:10 JST  
**目的**: ファイルの更新時間とバージョン番号の整合性を保つ

---

## 🔍 問題点

- **修正報告書の更新時間とバージョン番号が逆転している**
  - v19.9.18: 2026/01/15 23:26:19（最新）
  - v19.9.19: 2026/01/15 20:52:06（古い）← **不整合**

---

## ✅ 管理ルール

### 1. ファイル名の命名規則

**修正報告書**:
```
修正報告書_v[メジャー].[マイナー].[パッチ]-hf[hotfix番号]-[機能名].md
```

**例**:
- `修正報告書_v19.9.18-hf28-p0-camera-lag.md`
- `修正報告書_v19.9.19-hf29-quality-tax-redborder.md`

### 2. 更新時間の整合性

**原則**: バージョン番号が大きいほど、更新時間も新しい

**確認方法**:
```powershell
Get-ChildItem -Filter '修正報告書_*.md' | Sort-Object LastWriteTime -Descending
```

**不整合が発生した場合**:
1. ファイルの内容を確認
2. バージョン番号が正しいか確認
3. 必要に応じてファイル名を修正
4. 更新時間を手動で調整（最終手段）

### 3. BUILD_IDの管理

**dev/index.html**のBUILD_IDは以下の箇所で統一:
- ヘッダコメント（10行目、34行目）
- BUILD_PARAM（35行目）
- PWAキャッシュ問題の対処法（40行目）
- JavaScript内のBUILD_ID定数（285行目付近）

**更新時の注意**:
- 同じBUILD_IDだと、PWA/Service Workerで「更新されない」判定になる
- 新しいBUILD_IDを必ず設定する（例: `2026-01-15_2310_hf28-devsync`）

### 4. バージョン番号の管理

**VERSION**: メジャー.マイナー.パッチ（例: `v19.9.18`）  
**FULL_VERSION**: VERSION + hotfix情報（例: `v19.9.18-hf28-p0-camera-lag`）

**更新ルール**:
- 機能追加・修正: パッチ番号を増やす（例: 18 → 19）
- 重大な修正: hotfix番号を増やす（例: hf28 → hf29）
- メジャー変更: メジャー番号を増やす（例: 19 → 20）

---

## 🚨 チェックリスト

ファイルを更新する前に確認:

- [ ] ファイル名が命名規則に従っているか
- [ ] バージョン番号が正しいか（前のバージョンより大きいか）
- [ ] 更新時間がバージョン番号と整合しているか
- [ ] BUILD_IDがすべての箇所で統一されているか
- [ ] 修正報告書の内容が最新の実装と一致しているか

---

## 📝 今後の対応

1. **v19.9.19の修正報告書を再作成**
   - 内容が空になっているため、正しい内容で再作成する
   - 更新時間をv19.9.18より新しい時間に設定

2. **ファイル管理の自動化**
   - バージョン番号と更新時間の整合性チェックスクリプトを作成
   - 不整合を検出したら警告を出す

---

**最終更新**: 2026-01-15 23:10 JST
