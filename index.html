<!doctype html>
<html lang="ja">
<head>
  <!--
    APP: Smart Price
    FILE: index.html (BOOT PROBE)
    VERSION: v20.4.46_boot-probe-01
    DATE(JST): 2026-02-01 08:35 JST
    AUTHOR: Yui
    TITLE: Ëµ∑ÂãïÁ¢∫Ë™çÔºàVERSION/BUILD„ÇíÁ¢∫ÂÆü„Å´Ë°®Á§∫Ôºâ
    CHANGES:
      - Service Worker „Çí debug=1 ÊôÇ„Å†„ÅëÁÑ°ÂäπÂåñÔºà„Ç≠„É£„ÉÉ„Ç∑„É•ÂΩ±Èüø„ÅÆÂàá„ÇäÂàÜ„ÅëÔºâ
      - VERSION/BUILD „Çí„ÄåHTMLÁõ¥Êõ∏„Åç + JSÂÜçÊèèÁîª„Äç„Åß‰∫åÈáç„Å´Ë°®Á§∫ÔºàJSÂÅúÊ≠¢„ÇÇÊ§úÁü•Ôºâ
      - UI„ÅØÊúÄÂ∞èÈôêÔºà„Éò„ÉÉ„ÉÄ„Éº + 2„Éú„Çø„É≥Ôºâ„Å´Áïô„ÇÅ„Çã
    BUILD PARAM: ?b=2026-02-01_0835_boot-probe
    DEBUG PARAM: &debug=1
    POLICY: UI_FREEZE (DIAG ONLY / NO PRODUCT LOGIC)
  -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#D50000" />
  <title>Smart Price v20.4.46_boot-probe-01</title>
  <style>
    html, body {
      margin:0; padding:0; height:100%;
      background:#0b0b0b; color:#eaeaea;
      font-family: system-ui, -apple-system, "Segoe UI", "Noto Sans JP", sans-serif;
    }
    header {
      position: sticky; top:0; z-index: 1000;
      background: linear-gradient(135deg,#D50000,#b00000);
      padding: 10px 14px;
      box-shadow: 0 2px 10px rgba(0,0,0,.5);
      display:flex; align-items:center; justify-content:space-between;
    }
    .brand {
      display:flex; align-items:center; gap:10px; font-weight:700;
      letter-spacing:.2px;
    }
    .pill {
      background: rgba(255,255,255,.15);
      border: 1px solid rgba(255,255,255,.25);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      white-space: nowrap;
      max-width: 60vw;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .gear {
      width: 38px; height: 38px; border-radius: 8px;
      border: 1px solid rgba(255,255,255,.35);
      background: rgba(0,0,0,.15);
      display:flex; align-items:center; justify-content:center;
      font-size: 18px;
    }
    main {
      display:flex; align-items:flex-start; justify-content:center;
      padding: 34px 14px 14px;
    }
    .panel {
      width: min(980px, 96vw);
      margin-top: 10px;
    }
    .btnrow {
      display:flex; gap:18px; justify-content:center; align-items:center;
      margin-top: 24px;
    }
    .bigbtn {
      flex: 1;
      min-width: 280px;
      max-width: 460px;
      height: 120px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.22);
      background: #2b2f33;
      color: #eaeaea;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      gap: 8px;
      user-select:none;
    }
    .bigbtn.primary {
      background: rgba(213,0,0,.75);
      border-color: rgba(255,255,255,.18);
    }
    .bigbtn .icon {
      font-size: 26px;
      opacity:.95;
    }
    .bigbtn .label {
      font-size: 16px;
      letter-spacing:.2px;
    }
    .debug {
      margin-top: 18px;
      font-size: 12px;
      color: #cfcfcf;
      opacity:.9;
      display:none;
      border: 1px dashed rgba(255,255,255,.22);
      border-radius: 10px;
      padding: 10px 12px;
      background: rgba(255,255,255,.04);
      line-height: 1.6;
      word-break: break-all;
    }
    .muted { opacity:.7; }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <span style="font-size:18px;">üõí</span>
      <span>Smart Price</span>
      <span class="pill" id="verPill">v20.4.46_boot-probe-01</span>
    </div>
    <div class="gear" title="Ë®≠ÂÆö">‚öôÔ∏è</div>
  </header>

  <main>
    <div class="panel">
      <div class="btnrow">
        <div class="bigbtn primary">
          <div class="icon">‚ñ•</div>
          <div class="label">„Çπ„Ç≠„É£„É≥</div>
        </div>
        <div class="bigbtn">
          <div class="icon">‚å®Ô∏è</div>
          <div class="label">ÊâãÂÖ•Âäõ</div>
        </div>
      </div>

      <div class="debug" id="debugBox">
        <div><b>BOOT PROBE</b> <span class="muted">(versionË°®Á§∫„Å®JSËµ∑Âãï„ÉÅ„Çß„ÉÉ„ÇØ)</span></div>
        <div>VERSION: <span id="vOut"></span></div>
        <div>BUILD(b): <span id="bOut"></span></div>
        <div>URL: <span id="uOut"></span></div>
        <div>SW: <span id="swOut"></span></div>
        <div>JS: <span id="jsOut"></span></div>
      </div>
    </div>
  </main>

<script>
(() => {
  const VERSION = "v20.4.46_boot-probe-01";
  const qs = new URLSearchParams(location.search);
  const BUILD = (qs.get("b") || "").trim();
  const DEBUG = qs.get("debug") === "1";

  const pill = document.getElementById("verPill");
  const debugBox = document.getElementById("debugBox");

  // 1) „Åæ„ÅöË°®Á§∫ÔºàJS„ÅåÂãï„ÅÑ„Å¶„ÅÑ„Çå„Å∞‰∏äÊõ∏„Åç„Åï„Çå„ÇãÔºâ
  pill.textContent = BUILD ? (VERSION + "ÔΩú" + BUILD) : VERSION;

  // 2) debugË°®Á§∫
  if (DEBUG) {
    debugBox.style.display = "block";
    document.getElementById("vOut").textContent = VERSION;
    document.getElementById("bOut").textContent = BUILD || "(none)";
    document.getElementById("uOut").textContent = location.href;
    document.getElementById("jsOut").textContent = "RUNNING";
  }

  async function swText() {
    try {
      if (!("serviceWorker" in navigator)) return "NOT SUPPORTED";
      const regs = await navigator.serviceWorker.getRegistrations();
      if (regs && regs.length) {
        for (const r of regs) {
          try { await r.unregister(); } catch(e) {}
        }
        return "UNREGISTERED (" + regs.length + ")";
      }
      return "NONE";
    } catch (e) {
      return "ERROR: " + (e && e.message ? e.message : String(e));
    }
  }

  if (DEBUG) {
    swText().then(t => {
      document.getElementById("swOut").textContent = t;
    });
  }
})();
</script>
</body>
</html>
