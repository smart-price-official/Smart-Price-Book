<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Smart Price Dev Tool - ä¿®æ­£å ±å‘Šæ›¸ç”Ÿæˆãƒ»GitHubå·®åˆ†å–å¾—ãƒ»ã‚³ãƒ¼ãƒ‰ä¿ç®¡">
    <meta name="theme-color" content="#667eea">
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/png" href="./icon-192.png">
    <link rel="apple-touch-icon" href="./icon-192.png">
    <title>REX Dev Tool</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'BIZ UDã‚´ã‚·ãƒƒã‚¯', 'Meiryo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            border-bottom: 4px solid #667eea;
            padding-bottom: 15px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
            flex-wrap: wrap;
        }
        .tab {
            padding: 12px 24px;
            background: #f5f5f5;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: #666;
            transition: all 0.3s;
        }
        .tab.active {
            background: #667eea;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .section h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            font-family: inherit;
        }
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-top: 10px;
            margin-right: 10px;
            transition: all 0.3s;
        }
        button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        .btn-success { background: #4caf50; }
        .btn-success:hover { background: #45a049; }
        .btn-warning { background: #ff9800; }
        .btn-warning:hover { background: #f57c00; }
        .btn-info { background: #2196f3; }
        .btn-info:hover { background: #1976d2; }
        .btn-danger { background: #f44336; }
        .btn-danger:hover { background: #d32f2f; }
        .output {
            margin-top: 20px;
            padding: 20px;
            background: #fff;
            border: 2px solid #667eea;
            border-radius: 5px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 500px;
            overflow-y: auto;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #2196f3;
        }
        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        .github-link {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 16px;
            background: #24292e;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 14px;
        }
        .github-link:hover {
            background: #2f363d;
        }
        .code-list {
            margin-top: 15px;
        }
        .code-item {
            padding: 10px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .code-item-info {
            flex: 1;
        }
        .code-item-name {
            font-weight: bold;
            color: #333;
        }
        .code-item-meta {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        .code-item-actions {
            display: flex;
            gap: 10px;
        }
        .btn-sm {
            padding: 6px 12px;
            font-size: 14px;
        }
        @media (max-width: 768px) {
            .row {
                grid-template-columns: 1fr;
            }
            .tabs {
                flex-wrap: wrap;
            }
            .code-item {
                flex-direction: column;
                align-items: flex-start;
            }
            .code-item-actions {
                width: 100%;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ REX Dev Tool <span style="font-size: 0.6em; color: #667eea; font-weight: normal;">(PWAå¯¾å¿œ)</span></h1>
        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 20px; padding: 10px; background: #e3f2fd; border-radius: 8px; flex-wrap: wrap;">
            <button onclick="refreshLatestInfo()" class="btn-info" style="padding: 8px 16px;">ğŸ”„ æœ€æ–°æƒ…å ±ã‚’å–å¾—</button>
            <button id="pwa-install-button" onclick="installPWA()" class="btn-success" style="padding: 8px 16px; display: none; background: #4caf50;">ğŸ“± ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ </button>
            <span style="font-size: 0.9rem; color: #666;">â€» PWAå¯¾å¿œ: ã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã‹ã‚‰ã‚‚ä½¿ç”¨å¯èƒ½ã§ã™</span>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('report')">ğŸ“ ä¿®æ­£å ±å‘Šæ›¸ç”Ÿæˆ</button>
            <button class="tab" onclick="switchTab('diff')">ğŸ” GitHubå·®åˆ†å–å¾—</button>
            <button class="tab" onclick="switchTab('code')">ğŸ’¾ ã‚³ãƒ¼ãƒ‰ä¿ç®¡ãƒ»å–å¾—</button>
            <button class="tab" onclick="switchTab('patch-to-dev')">ğŸš€ patch â†’ devåæ˜ </button>
        </div>

        <!-- ä¿®æ­£å ±å‘Šæ›¸ç”Ÿæˆã‚¿ãƒ– -->
        <div id="report-tab" class="tab-content active">
            <div class="info">
                <strong>ä½¿ã„æ–¹:</strong><br>
                1. å„é …ç›®ã‚’å…¥åŠ›ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã¯è‡ªå‹•ã§+1ã•ã‚Œã¾ã™ï¼‰<br>
                2. <strong>HEAD_COMMITï¼ˆä»Šå›ã®ãƒ•ãƒ«SHAï¼‰</strong>ã¨<strong>BASE_COMMITï¼ˆå‰å›ã®ãƒ•ãƒ«SHAï¼‰</strong>ã‚’å¿…ãšå…¥åŠ›<br>
                3. BUILD_IDã‚’å…¥åŠ›ã™ã‚‹ã¨ã€æ¤œè¨¼URLã«è‡ªå‹•ã§è¿½åŠ ã•ã‚Œã¾ã™<br>
                4. ã€Œå ±å‘Šæ›¸ã‚’ç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯<br>
                5. ç”Ÿæˆã•ã‚ŒãŸMarkdownã‚’ã‚³ãƒ”ãƒ¼ã¾ãŸã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰<br>
                <br>
                <strong>é‡è¦:</strong> compare URLã¯å›ºå®šSHAã§ç”Ÿæˆã•ã‚Œã¾ã™ï¼ˆHEAD~1...HEADå½¢å¼ã¯ç¦æ­¢ï¼‰<br>
                <strong>å¿…é ˆ:</strong> HEAD_COMMITã¨BASE_COMMITã®ä¸¡æ–¹ã‚’å¿…ãšå…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆãƒ•ãƒ«SHAæ¨å¥¨ï¼‰<br>
                <strong>æ³¨æ„:</strong> ã“ã®HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚Visual StudioãŒé–‹ãå ´åˆã¯ã€<br>
                ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å³ã‚¯ãƒªãƒƒã‚¯ â†’ ã€Œãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰é–‹ãã€ â†’ ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚
            </div>

            <div class="section">
                <h2>åŸºæœ¬æƒ…å ±</h2>
                <div class="row">
                    <div>
                        <label>ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</label>
                        <input type="text" id="currentVersion" value="v19.9.25" placeholder="v19.9.25">
                    </div>
                    <div>
                        <label>æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰:</label>
                        <input type="text" id="newVersion" readonly style="background: #f0f0f0;">
                    </div>
                </div>
                <div class="row">
                    <div>
                        <label>æ—¥æ™‚ï¼ˆJSTï¼‰:</label>
                        <input type="text" id="dateTime" placeholder="2026-01-16 21:47 JST">
                    </div>
                    <div>
                        <label>HEAD_COMMITï¼ˆä»Šå›ã®ãƒ•ãƒ«SHAï¼‰:</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <select id="commitHashSelect" onchange="document.getElementById('commitHash').value = this.value" style="flex: 1; padding: 8px; border-radius: 4px;">
                                <option value="">ï¼ˆæœ€æ–°ã‚³ãƒŸãƒƒãƒˆã‚’å–å¾—ä¸­...ï¼‰</option>
                            </select>
                            <input type="text" id="commitHash" placeholder="ï¼ˆã¾ãŸã¯æ‰‹å‹•å…¥åŠ›ï¼‰" title="v19.9.25ã®ç¢ºå®šã‚³ãƒŸãƒƒãƒˆSHAï¼ˆãƒ•ãƒ«SHAå¿…é ˆï¼‰" style="flex: 2;">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        <label>BASE_COMMITï¼ˆå‰å›ã®ãƒ•ãƒ«SHAï¼‰:</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <select id="baseCommitSelect" onchange="document.getElementById('baseCommit').value = this.value" style="flex: 1; padding: 8px; border-radius: 4px;">
                                <option value="">ï¼ˆæœ€æ–°ã‚³ãƒŸãƒƒãƒˆã‚’å–å¾—ä¸­...ï¼‰</option>
                            </select>
                            <input type="text" id="baseCommit" value="8cfd30d08154cf71504cdba9d775c41f414deba9" placeholder="8cfd30d08154cf71504cdba9d775c41f414deba9" title="v19.9.24ã®ç¢ºå®šã‚³ãƒŸãƒƒãƒˆSHAï¼ˆãƒ•ãƒ«SHAå¿…é ˆï¼‰" style="flex: 2;">
                        </div>
                    </div>
                    <div>
                        <label>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆcompareç”¨ï¼‰:</label>
                        <input type="text" id="filePath" value="dev/index.html" placeholder="dev/index.html">
                    </div>
                </div>
                <div>
                    <label>ã‚¿ã‚¤ãƒˆãƒ«:</label>
                    <input type="text" id="title" placeholder="P0è¿½åŠ ï¼ˆURLè‡ªå‹•è¿½å¾“ï¼šdev/patch/rootã«è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆï¼‰">
                </div>
            </div>

            <div class="section">
                <h2>å¤‰æ›´å†…å®¹</h2>
                <label>å¤‰æ›´ç‚¹ï¼ˆç®‡æ¡æ›¸ãã€1è¡Œ1é …ç›®ï¼‰:</label>
                <textarea id="changes" placeholder="âœ… P0è¿½åŠ : ãƒ–ãƒ©ã‚¦ã‚¶ç‰ˆï¼ˆURLï¼‰ãƒ¢ãƒ¼ãƒ€ãƒ«ã®URLã‚’ç¾åœ¨ã®locationã«è‡ªå‹•è¿½å¾“ï¼ˆdev/patch/rootã«è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆï¼‰
âœ… P0è¿½åŠ : buildUrl()é–¢æ•°ã‚’ä¿®æ­£ï¼ˆç¾åœ¨ã®URLã®?b=ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å„ªå…ˆã€ãªã‘ã‚Œã°BUILD_IDã‚’ä½¿ç”¨ï¼‰"></textarea>
            </div>

            <div class="section">
                <h2>æ¤œè¨¼æƒ…å ±</h2>
                <div class="row">
                    <div>
                        <label>BUILD_ID:</label>
                        <input type="text" id="buildId" placeholder="2026-01-16_2142_auto-url-follow-folder">
                    </div>
                    <div>
                        <label>æ¤œè¨¼URLï¼ˆBASE URLã€?b=ã¯è‡ªå‹•è¿½åŠ ï¼‰:</label>
                        <input type="text" id="verifyUrlBase" placeholder="https://smart-price-official.github.io/Smart-Price-Book/dev/" value="https://smart-price-official.github.io/Smart-Price-Book/dev/">
                    </div>
                </div>
            </div>

            <button onclick="generateReport()">ğŸ“ å ±å‘Šæ›¸ã‚’ç”Ÿæˆ</button>
            <button onclick="copyToClipboard()" class="btn-success">ğŸ“‹ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼</button>
            <button onclick="downloadMarkdown()" class="btn-warning">ğŸ’¾ Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>

            <div class="output" id="report-output"></div>
        </div>

        <!-- GitHubå·®åˆ†å–å¾—ã‚¿ãƒ– -->
        <div id="diff-tab" class="tab-content">
            <div class="info">
                <strong>ä½¿ã„æ–¹:</strong><br>
                1. æ¯”è¼ƒå…ƒã¨æ¯”è¼ƒå…ˆã®ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ï¼ˆå›ºå®šSHAï¼‰ã‚’å…¥åŠ›<br>
                2. ã€ŒGitHubå·®åˆ†URLã‚’ç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯<br>
                3. ç”Ÿæˆã•ã‚ŒãŸURLã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦GitHubã§å·®åˆ†ã‚’ç¢ºèª<br>
                <br>
                <strong>é‡è¦:</strong> HEAD~1...HEADå½¢å¼ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚å¿…ãšå›ºå®šSHAã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<br>
                <strong>æ³¨æ„:</strong> ãƒ­ãƒ¼ã‚«ãƒ«ã®gitã‚³ãƒãƒ³ãƒ‰ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰å®Ÿè¡Œã§ãã¾ã›ã‚“ã€‚<br>
                GitHubã®Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§å·®åˆ†ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
            </div>

            <div class="section">
                <h2>ã‚³ãƒŸãƒƒãƒˆæƒ…å ±</h2>
                <div class="row">
                    <div>
                        <label>ãƒ–ãƒ©ãƒ³ãƒé¸æŠ:</label>
                        <select id="branchSelect" onchange="onBranchChange()" style="width: 100%; padding: 8px; border-radius: 4px; margin-bottom: 10px;">
                            <option value="main">mainãƒ–ãƒ©ãƒ³ãƒï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰</option>
                            <option value="patch" selected>patchãƒ–ãƒ©ãƒ³ãƒï¼ˆv19.9.25ç­‰ã®å·®åˆ†ç”¨ï¼‰</option>
                        </select>
                        <div class="hint" style="background: #e3f2fd; padding: 8px; border-radius: 4px; margin-bottom: 10px; font-size: 0.9rem;">
                            ğŸ’¡ <strong>patchãƒ–ãƒ©ãƒ³ãƒã‚’é¸æŠ</strong>: ãƒ¦ã‚¤ã¨ã®å·®åˆ†ç¢ºèªç”¨ã®ãƒ–ãƒ©ãƒ³ãƒã§ã™ã€‚v19.9.25ãªã©ã®ã‚³ãƒŸãƒƒãƒˆã¯ã“ã¡ã‚‰ã«å­˜åœ¨ã—ã¾ã™ã€‚
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        <label>æ¯”è¼ƒå…ƒã®ã‚³ãƒŸãƒƒãƒˆï¼ˆBASE_COMMITãƒ»å›ºå®šSHAå¿…é ˆï¼‰:</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <select id="commit1Select" onchange="document.getElementById('commit1').value = this.value" style="flex: 1; padding: 8px; border-radius: 4px;">
                                <option value="">ï¼ˆæœ€æ–°ã‚³ãƒŸãƒƒãƒˆã‚’å–å¾—ä¸­...ï¼‰</option>
                            </select>
                            <input type="text" id="commit1" placeholder="8cfd30d08154cf71504cdba9d775c41f414deba9" title="å‰å›ã®ç¢ºå®šã‚³ãƒŸãƒƒãƒˆSHAï¼ˆãƒ•ãƒ«SHAæ¨å¥¨ï¼‰" style="flex: 2;">
                        </div>
                    </div>
                    <div>
                        <label>æ¯”è¼ƒå…ˆã®ã‚³ãƒŸãƒƒãƒˆï¼ˆHEAD_COMMITãƒ»å›ºå®šSHAå¿…é ˆï¼‰:</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <select id="commit2Select" onchange="document.getElementById('commit2').value = this.value" style="flex: 1; padding: 8px; border-radius: 4px;">
                                <option value="">ï¼ˆæœ€æ–°ã‚³ãƒŸãƒƒãƒˆã‚’å–å¾—ä¸­...ï¼‰</option>
                            </select>
                            <input type="text" id="commit2" placeholder="v19.9.25ã®ã‚³ãƒŸãƒƒãƒˆSHAã‚’å…¥åŠ›ï¼ˆGitHubã«pushå¾Œã«ç¢ºå®šï¼‰" title="v19.9.25ã®ç¢ºå®šã‚³ãƒŸãƒƒãƒˆSHAï¼ˆãƒ•ãƒ«SHAæ¨å¥¨ï¼‰" style="flex: 2;">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        <label>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: dev/index.htmlï¼‰:</label>
                        <input type="text" id="filePath" value="dev/index.html" placeholder="dev/index.html">
                    </div>
                    <div>
                        <label>BUILD_IDï¼ˆæ¤œè¨¼URLç”¨ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰:</label>
                        <input type="text" id="buildIdForDiff" placeholder="2026-01-17_0716_P0_scanner-error-handling" title="æ¤œè¨¼URLã‚’ç”Ÿæˆã™ã‚‹å ´åˆã¯BUILD_IDã‚’å…¥åŠ›">
                    </div>
                </div>
            </div>

            <button onclick="generateDiffUrl()" class="btn-info">ğŸ” GitHubå·®åˆ†URLã‚’ç”Ÿæˆ</button>
            <button onclick="copyDiffUrl()" class="btn-success">ğŸ“‹ URLã‚’ã‚³ãƒ”ãƒ¼</button>
            <button onclick="debugV1925Detection()" class="btn-warning" style="margin-left: 10px;">ğŸ” v19.9.25æ¤œå‡ºãƒ‡ãƒãƒƒã‚°</button>
            <button onclick="pushToGitHub()" class="btn-success" style="margin-left: 10px; background: #4caf50;">ğŸš€ GitHubã«push</button>
            
            <!-- æœ€æ–°2ã¤ã®SHAè‡ªå‹•è¡¨ç¤ºï¼ˆAIå…ˆå›ã‚Šï¼‰ -->
            <div id="latest-commits-display" style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-left: 4px solid #2196f3; border-radius: 4px;">
                <h3 style="margin-top: 0; color: #1976d2; font-size: 1rem;">ğŸ“‹ æœ€æ–°2ã¤ã®ã‚³ãƒŸãƒƒãƒˆSHAï¼ˆè‡ªå‹•å–å¾—ï¼‰</h3>
                <div id="latest-commits-list" style="margin-top: 10px;">
                    <div style="color: #666; font-size: 0.9rem;">å–å¾—ä¸­...</div>
                </div>
            </div>

            <div class="output" id="diff-output"></div>
        </div>

        <!-- ã‚³ãƒ¼ãƒ‰ä¿ç®¡ãƒ»å–å¾—ã‚¿ãƒ– -->
        <div id="code-tab" class="tab-content">
            <div class="info">
                <strong>ä½¿ã„æ–¹:</strong><br>
                1. ã‚³ãƒ¼ãƒ‰ã‚’ä¿ç®¡ï¼šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å…¥åŠ›ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã€ã€Œã‚³ãƒ¼ãƒ‰ã‚’ä¿ç®¡ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯<br>
                2. ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ï¼šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ã€Œã‚³ãƒ¼ãƒ‰ä¸€è¦§ã‚’è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯<br>
                3. éå»ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ï¼šã‚³ãƒ¼ãƒ‰ä¸€è¦§ã‹ã‚‰ã€Œã‚³ãƒ”ãƒ¼ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯<br>
                <br>
                <strong>ä¿å­˜å…ˆ:</strong> REX Dev Tool/ã‚³ãƒ¼ãƒ‰ä¿ç®¡/ãƒãƒ¼ã‚¸ãƒ§ãƒ³/ãƒ•ã‚¡ã‚¤ãƒ«å<br>
                <strong>å¯¾å¿œãƒ•ã‚¡ã‚¤ãƒ«:</strong> .html, .gs, .js, .md, .css ãªã©ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã«å¯¾å¿œ
            </div>

            <div class="section">
                <h2>ã‚³ãƒ¼ãƒ‰ã‚’ä¿ç®¡</h2>
                <div class="info" style="background: #fff3cd; border-left-color: #ffc107;">
                    <strong>ğŸ“Œ ãƒ¬ãƒƒã‚¯ã‚¹ãŒäº‹å‰ã«æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šè¾¼ã‚“ã§ã„ã¾ã™</strong><br>
                    ãƒ¦ã‚¤ã¨æ¤œè¨¼ã—ãŸå¾Œã€ã€ŒğŸ’¾ ã‚³ãƒ¼ãƒ‰ã‚’ä¿ç®¡ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚
                </div>
                <div class="row">
                    <div>
                        <label>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆä¾‹: v19.9.24ï¼‰:</label>
                        <input type="text" id="saveVersion" placeholder="v19.9.24">
                    </div>
                    <div>
                        <label>ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆä¾‹: index.htmlï¼‰:</label>
                        <input type="text" id="saveFileName" placeholder="index.html">
                    </div>
                </div>
                <div style="margin-bottom: 10px;">
                    <label>æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚€ï¼ˆdev/index.htmlï¼‰:</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="file" id="fileInput" accept=".html,.gs,.js,.md,.css" style="flex: 1; padding: 8px;">
                        <button onclick="loadLatestCode()" class="btn-info" style="margin: 0;">ğŸ“‚ æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚€</button>
                        <button onclick="document.getElementById('fileInput').click()" class="btn-warning" style="margin: 0;">ğŸš€ è‡ªå‹•èª­ã¿è¾¼ã¿</button>
                    </div>
                    <div style="margin-top: 5px; font-size: 12px; color: #666;">
                        ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹: <code style="background: #f5f5f5; padding: 2px 5px; border-radius: 3px;">G:\ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–\Cursor\Smart Price\Smart-Price-Book\dev\index.html</code>
                    </div>
                </div>
                <div>
                    <label>ã‚³ãƒ¼ãƒ‰å†…å®¹:</label>
                    <textarea id="saveCode" rows="15" placeholder="ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„..."></textarea>
                </div>
                <button onclick="saveCode()" class="btn-success">ğŸ’¾ ã‚³ãƒ¼ãƒ‰ã‚’ä¿ç®¡ï¼ˆæ¤œè¨¼å¾Œã«æŠ¼ã™ï¼‰</button>
            </div>

            <div class="section">
                <h2>ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—</h2>
                <div class="row">
                    <div>
                        <label>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠï¼ˆä¾‹: v19.9.22ï¼‰:</label>
                        <input type="text" id="loadVersion" placeholder="v19.9.22" list="versionList">
                        <datalist id="versionList"></datalist>
                    </div>
                    <div>
                        <label>ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ç©ºæ¬„ã§å…¨ã¦ï¼‰:</label>
                        <input type="text" id="fileType" placeholder=".html ã¾ãŸã¯ç©ºæ¬„">
                    </div>
                </div>
                <button onclick="loadCodeList()" class="btn-info">ğŸ“‹ ã‚³ãƒ¼ãƒ‰ä¸€è¦§ã‚’è¡¨ç¤º</button>
                <button onclick="loadAllVersions()" class="btn-info">ğŸ“š å…¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸€è¦§ã‚’è¡¨ç¤º</button>

                <div id="code-list" class="code-list"></div>
            </div>
        </div>

        <!-- patch â†’ devåæ˜ ã‚¿ãƒ– -->
        <div id="patch-to-dev-tab" class="tab-content">
            <div class="info">
                <strong>ä½¿ã„æ–¹:</strong><br>
                1. patchãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰åæ˜ ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠï¼ˆãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼‰<br>
                2. ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’ç¢ºèª<br>
                3. ãƒ¦ã‚¤ã®OKç¢ºèªå¾Œã€ã€Œdevã«åæ˜ ï¼ˆã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ï¼‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯<br>
                4. Smart-Price-Book/dev/index.htmlã‚’é–‹ã„ã¦ã€ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã®å†…å®¹ã‚’è²¼ã‚Šä»˜ã‘<br>
                <br>
                <strong>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼:</strong><br>
                patchãƒ•ã‚©ãƒ«ãƒ€ï¼ˆå·®åˆ†ä½œæˆã‚¨ãƒªã‚¢ï¼‰â†’ ãƒ¦ã‚¤ãŒOK â†’ devã«æ­£å¼åæ˜ <br>
                <strong>æ³¨æ„:</strong> ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶ç´„ã«ã‚ˆã‚Šã€ç›´æ¥ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šæ›¸ãã¯ã§ãã¾ã›ã‚“ã€‚ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰çµŒç”±ã§ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚
            </div>

            <div class="section">
                <h2>patchãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰devã«åæ˜ </h2>
                <div class="row">
                    <div>
                        <label>patchãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ:</label>
                        <input type="file" id="patchFileInput" accept=".html" style="width: 100%; padding: 8px; border-radius: 4px; margin-bottom: 10px;">
                        <div class="hint" style="background: #fff3cd; padding: 8px; border-radius: 4px; margin-bottom: 10px; font-size: 0.9rem;">
                            ğŸ’¡ <strong>æ¨å¥¨ãƒ‘ã‚¹:</strong> G:\ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–\Cursor\Smart Price\patch\YYYY-MM-DD\ä¿®æ­£_index__*.html
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        <label>é¸æŠã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«:</label>
                        <div id="selectedFileName" style="padding: 8px; background: #f5f5f5; border-radius: 4px; font-weight: bold; color: #333;">
                            ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        <label>ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»æœ€åˆã®500è¡Œï¼‰:</label>
                        <textarea id="patchFileContent" readonly style="width: 100%; min-height: 300px; padding: 10px; border: 2px solid #ddd; border-radius: 4px; font-family: 'Consolas', 'Courier New', monospace; font-size: 13px; background: #f9f9f9;" placeholder="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã™ã‚‹ã¨å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™"></textarea>
                    </div>
                </div>
            </div>

            <button onclick="loadPatchFile()" class="btn-info">ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€</button>
            <button onclick="copyToDev()" class="btn-success">âœ… devã«åæ˜ ï¼ˆã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ï¼‰</button>
            <button onclick="downloadPatchFile()" class="btn-warning">ğŸ’¾ dev/index.htmlã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
            
            <div class="output" id="patch-to-dev-output"></div>
        </div>
    </div>

    <script>
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // ã‚³ãƒ¼ãƒ‰ä¿ç®¡ã‚¿ãƒ–ãŒé–‹ã‹ã‚ŒãŸã¨ãã«æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚€
            if (tabName === 'code') {
                setTimeout(() => {
                    loadPreloadedCode();
                }, 100);
            }
        }

        // ç¾åœ¨æ™‚åˆ»ã‚’è‡ªå‹•å…¥åŠ›
        function updateDateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('dateTime').value = `${year}-${month}-${day} ${hours}:${minutes} JSTï¼ˆæ­£ç¢ºãªæ™‚åˆ»ï¼‰`;
        }

        // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’è‡ªå‹•è¨ˆç®—
        function updateVersion() {
            const current = document.getElementById('currentVersion').value;
            const match = current.match(/v(\d+)\.(\d+)\.(\d+)/);
            if (match) {
                const major = parseInt(match[1]);
                const minor = parseInt(match[2]);
                const patch = parseInt(match[3]) + 1;
                document.getElementById('newVersion').value = `v${major}.${minor}.${patch}`;
            }
        }

        // BUILD_IDã‚’è‡ªå‹•ç”Ÿæˆ
        function updateBuildId() {
            const dateTime = document.getElementById('dateTime').value;
            const newVersion = document.getElementById('newVersion').value;
            if (dateTime && newVersion) {
                const dateMatch = dateTime.match(/(\d{4}-\d{2}-\d{2}) (\d{2}):(\d{2})/);
                if (dateMatch) {
                    const date = dateMatch[1];
                    const time = dateMatch[2] + dateMatch[3];
                    document.getElementById('buildId').value = `${date}_${time}_${newVersion.replace('v', '')}`;
                }
            }
        }

        // å ±å‘Šæ›¸ã‚’ç”Ÿæˆ
        function generateReport() {
            const currentVersion = document.getElementById('currentVersion').value;
            const newVersion = document.getElementById('newVersion').value;
            const dateTime = document.getElementById('dateTime').value;
            const commitHash = document.getElementById('commitHash').value.trim();
            const baseCommit = document.getElementById('baseCommit').value.trim();
            const filePath = document.getElementById('filePath').value.trim() || 'dev/index.html';
            const title = document.getElementById('title').value;
            const changes = document.getElementById('changes').value;
            const buildId = document.getElementById('buildId').value.trim();
            let verifyUrlBase = document.getElementById('verifyUrlBase').value.trim();
            
            // âœ… æ¤œè¨¼URLã¯å¿…ãš/dev/ã‚’æ˜ç¤º
            if (!verifyUrlBase || !verifyUrlBase.includes('/dev/')) {
                verifyUrlBase = 'https://smart-price-official.github.io/Smart-Price-Book/dev/';
            }

            // æ¤œè¨¼URLã«BUILD_IDã‚’å¿…ãšå«ã‚ã‚‹
            const verifyUrlNormal = verifyUrlBase + (verifyUrlBase.includes('?') ? '&' : '?') + `b=${encodeURIComponent(buildId)}`;
            const verifyUrlDebug = verifyUrlNormal + '&debug=1';

            // compare URLã‚’å›ºå®šSHAã§ç”Ÿæˆ
            const compareUrl = `https://github.com/smart-price-official/Smart-Price-Book/compare/${baseCommit}...${commitHash}?diff=split#${encodeURIComponent(filePath)}`;
            const commitUrl = `https://github.com/smart-price-official/Smart-Price-Book/commit/${commitHash}`;

            const changesList = changes.split('\n').filter(line => line.trim()).map(line => `- ${line.trim()}`).join('\n');

            const report = `# ğŸ”§ Smart Price ä¿®æ­£å ±å‘Šæ›¸

**TO**: ãƒ¦ã‚¤ï¼ˆç›£ç£ï¼‰ã€ãªã¹ã•ã‚“ï¼ˆå®Ÿæ©Ÿæ¤œè¨¼ï¼‰  
**FROM**: Rex  
**DATE(JST)**: ${dateTime}  
**VERSION**: ${newVersion}  
**BUILD_ID**: ${buildId}  
**HEAD_COMMITï¼ˆä»Šå›ã®ãƒ•ãƒ«SHAãƒ»${newVersion}ï¼‰**: ${commitHash}ï¼ˆ${commitUrl}ï¼‰  
**BASE_COMMITï¼ˆå‰å›ã®ãƒ•ãƒ«SHAï¼‰**: ${baseCommit}ï¼ˆhttps://github.com/smart-price-official/Smart-Price-Book/commit/${baseCommit}ï¼‰

---

## ğŸ“‹ å¤‰æ›´ç‚¹ï¼ˆç®‡æ¡æ›¸ãï¼‰

${changesList}

---

## âœ… å—ã‘å…¥ã‚Œæ¡ä»¶

- [ ] å®Ÿæ©Ÿã§å‹•ä½œç¢ºèªæ¸ˆã¿
- [ ] VERSIONè¡¨ç¤ºãŒ ${newVersion} ã«ãªã£ã¦ã„ã‚‹
- [ ] å¤‰æ›´å†…å®¹ãŒæ­£ã—ãåæ˜ ã•ã‚Œã¦ã„ã‚‹

---

## ğŸ”— æ¤œè¨¼URL

**é€šå¸¸URL**: ${verifyUrlNormal}  
**ãƒ‡ãƒãƒƒã‚°URL**: ${verifyUrlDebug}

---

## ğŸ” ã‚³ãƒŸãƒƒãƒˆãƒ»å·®åˆ†URL

**HEAD_COMMITï¼ˆä»Šå›ã®ãƒ•ãƒ«SHAãƒ»${newVersion}ï¼‰**: ${commitHash}ï¼ˆ${commitUrl}ï¼‰  
**BASE_COMMITï¼ˆå‰å›ã®ãƒ•ãƒ«SHAï¼‰**: ${baseCommit}ï¼ˆhttps://github.com/smart-price-official/Smart-Price-Book/commit/${baseCommit}ï¼‰  
**COMPARE URLï¼ˆå›ºå®šSHAï¼‰**: ${compareUrl}  
â€» **é‡è¦**: compare URLã¯å›ºå®šSHAå½¢å¼ã§ã™ï¼ˆHEAD~1...HEADå½¢å¼ã¯ç¦æ­¢ï¼‰

---

## ğŸ“ ãƒ†ã‚¹ãƒˆæ‰‹é †

1. é€šå¸¸ã‚¿ãƒ–ã§æ¤œè¨¼URLã‚’é–‹ã
2. ç”»é¢ã®VERSIONãŒ ${newVersion} ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
3. å¤‰æ›´å†…å®¹ã‚’ãƒ†ã‚¹ãƒˆ
4. debug=1ã§ãƒ­ã‚°ã‚’ç¢ºèª

---

**æœ€çµ‚æ›´æ–°**: ${dateTime}`;

            // ä¿®æ­£å ±å‘Šæ›¸ã‚’å‡ºåŠ›
            const outputDiv = document.getElementById('report-output');
            outputDiv.innerHTML = `<pre style="background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;">${report}</pre>`;
            
            // æ¤œè¨¼URLã‚’ç›®ç«‹ã¤å½¢ã§è¡¨ç¤ºï¼ˆã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ä»˜ãï¼‰
            const urlDiv = document.createElement('div');
            urlDiv.style.cssText = 'margin-top: 20px; padding: 15px; background: #e3f2fd; border-left: 4px solid #2196f3; border-radius: 4px;';
            urlDiv.innerHTML = `
                <h3 style="margin-top: 0; color: #1976d2;">ğŸ”— æ¤œè¨¼URLï¼ˆã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼ï¼‰</h3>
                <div style="margin: 10px 0;">
                    <strong>é€šå¸¸URL:</strong><br>
                    <code style="display: block; padding: 8px; background: white; border-radius: 4px; margin: 5px 0; word-break: break-all; cursor: pointer;" onclick="copyUrlToClipboard('${verifyUrlNormal}')" title="ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼">${verifyUrlNormal}</code>
                    <button onclick="copyUrlToClipboard('${verifyUrlNormal}')" style="padding: 5px 10px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">ğŸ“‹ é€šå¸¸URLã‚’ã‚³ãƒ”ãƒ¼</button>
                </div>
                <div style="margin: 10px 0;">
                    <strong>ãƒ‡ãƒãƒƒã‚°URL:</strong><br>
                    <code style="display: block; padding: 8px; background: white; border-radius: 4px; margin: 5px 0; word-break: break-all; cursor: pointer;" onclick="copyUrlToClipboard('${verifyUrlDebug}')" title="ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼">${verifyUrlDebug}</code>
                    <button onclick="copyUrlToClipboard('${verifyUrlDebug}')" style="padding: 5px 10px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">ğŸ“‹ ãƒ‡ãƒãƒƒã‚°URLã‚’ã‚³ãƒ”ãƒ¼</button>
                </div>
            `;
            outputDiv.appendChild(urlDiv);
        }

        // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        function copyToClipboard() {
            const output = document.getElementById('report-output').textContent;
            if (!output) {
                alert('å…ˆã«å ±å‘Šæ›¸ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„');
                return;
            }
            navigator.clipboard.writeText(output).then(() => {
                alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            }).catch(err => {
                alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + err);
            });
        }

        // Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        function downloadMarkdown() {
            const output = document.getElementById('report-output').textContent;
            if (!output) {
                alert('å…ˆã«å ±å‘Šæ›¸ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„');
                return;
            }
            
            const newVersion = document.getElementById('newVersion').value;
            const dateTime = document.getElementById('dateTime').value;
            const dateMatch = dateTime.match(/(\d{4}-\d{2}-\d{2})/);
            const date = dateMatch ? dateMatch[1] : new Date().toISOString().split('T')[0];
            
            const now = new Date();
            const timeStr = String(now.getHours()).padStart(2, '0') + String(now.getMinutes()).padStart(2, '0') + String(now.getSeconds()).padStart(2, '0');
            const filename = `ä¿®æ­£å ±å‘Šæ›¸_${newVersion}_${date}_${timeStr}.md`;
            
            const blob = new Blob([output], { type: 'text/markdown;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert(`Markdownãƒ•ã‚¡ã‚¤ãƒ«ã€Œ${filename}ã€ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼`);
        }

        // GitHubã‹ã‚‰æœ€æ–°ã‚³ãƒŸãƒƒãƒˆãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã¦ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã«è¨­å®šï¼ˆAIå…ˆå›ã‚Šï¼‰
        async function loadLatestCommits(selectId, inputId, autoSelectIndex = 0) {
            const select = document.getElementById(selectId);
            const input = document.getElementById(inputId);
            
            if (!select) return;
            
            try {
                // ãƒ–ãƒ©ãƒ³ãƒé¸æŠã‚’å–å¾—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: patchï¼‰
                const branchSelect = document.getElementById('branchSelect');
                const branch = branchSelect ? branchSelect.value : 'patch';
                
                // GitHub REST API: GET /repos/:owner/:repo/commits?sha={branch} (æœ€æ–°30ä»¶ãƒ»v19.9.xã‚’æ¢ã™ãŸã‚)
                const apiUrl = `https://api.github.com/repos/smart-price-official/Smart-Price-Book/commits?sha=${branch}&per_page=30`;
                console.log(`[loadLatestCommits] ${selectId}: ${branch}ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ã‚³ãƒŸãƒƒãƒˆã‚’å–å¾—ä¸­: ${apiUrl}`);
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    throw new Error(`GitHub API ã‚¨ãƒ©ãƒ¼: ${response.status} ${response.statusText}`);
                }
                
                const commits = await response.json();
                if (!commits || commits.length === 0) {
                    throw new Error('ã‚³ãƒŸãƒƒãƒˆæƒ…å ±ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ');
                }
                
                console.log(`[loadLatestCommits] ${selectId}: ${branch}ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰${commits.length}ä»¶ã®ã‚³ãƒŸãƒƒãƒˆã‚’å–å¾—ã—ã¾ã—ãŸ`);
                console.log(`[loadLatestCommits] æœ€æ–°5ä»¶:`, commits.slice(0, 5).map(c => ({
                    sha: c.sha.substring(0, 7),
                    message: c.commit.message.split('\n')[0].substring(0, 50)
                })));
                
                // ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã‚’ã‚¯ãƒªã‚¢
                select.innerHTML = '<option value="">ï¼ˆæœ€æ–°ã‚³ãƒŸãƒƒãƒˆã‚’é¸æŠï¼‰</option>';
                
                // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’å«ã‚€ã‚³ãƒŸãƒƒãƒˆã‚’å„ªå…ˆçš„ã«è¡¨ç¤ºï¼ˆv19.9.xã‚’æ¢ã™ï¼‰
                let foundVersionCommit = null;
                let foundV1924 = null;
                let foundV1925 = null;
                
                // ã‚³ãƒŸãƒƒãƒˆãƒªã‚¹ãƒˆã‚’ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã«è¿½åŠ 
                commits.forEach((commit, index) => {
                    const sha = commit.sha;
                    const shortSha = sha.substring(0, 7);
                    const message = commit.commit.message.split('\n')[0];
                    const date = new Date(commit.commit.author.date).toLocaleString('ja-JP', { month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' });
                    
                    // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ï¼ˆv19.9.xï¼‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ï¼ˆå¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„ï¼‰
                    const versionMatch = message.match(/v19\.9\.(\d+)/i);
                    const hasVersion = versionMatch !== null;
                    const versionNum = hasVersion ? parseInt(versionMatch[1]) : 0;
                    
                    // ãƒ‡ãƒãƒƒã‚°: v19.9.25ã‚’å«ã‚€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª
                    if (message.toLowerCase().includes('v19.9.25') || message.toLowerCase().includes('v19.9.26')) {
                        console.log(`[DEBUG] ãƒãƒ¼ã‚¸ãƒ§ãƒ³é–¢é€£ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œå‡º (index=${index}):`, {
                            sha: shortSha,
                            message: message,
                            versionMatch: versionMatch,
                            hasVersion: hasVersion,
                            versionNum: versionNum,
                            branch: branch
                        });
                    }
                    
                    const option = document.createElement('option');
                    option.value = sha;
                    
                    // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’å«ã‚€å ´åˆã¯å¼·èª¿è¡¨ç¤º
                    if (hasVersion) {
                        option.textContent = `ğŸ“Œ ${shortSha} - ${message.substring(0, 60)} (${date}) [v19.9.${versionNum}]`;
                        option.style.fontWeight = 'bold';
                        // v19.9.24ã‚’æ¢ã™ï¼ˆBASE_COMMITç”¨ï¼‰
                        if (!foundV1924 && versionNum === 24) {
                            foundV1924 = { sha, index };
                        }
                        // v19.9.25ã‚’æ¢ã™ï¼ˆHEAD_COMMITç”¨ï¼‰
                        if (!foundV1925 && versionNum === 25) {
                            foundV1925 = { sha, index };
                            foundVersionCommit = { sha, index };
                            console.log(`[loadLatestCommits] ${selectId}: v19.9.25ã‚’æ¤œå‡º (index=${index}, sha=${sha.substring(0, 7)})`);
                        }
                    } else {
                        option.textContent = `${shortSha} - ${message.substring(0, 50)} (${date})`;
                    }
                    
                    select.appendChild(option);
                    
                    // æŒ‡å®šã•ã‚ŒãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ã‚³ãƒŸãƒƒãƒˆã‚’è‡ªå‹•é¸æŠï¼ˆHEAD_COMMIT=0ã€BASE_COMMIT=1ï¼‰
                    // ãŸã ã—ã€v19.9.25ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã¯ãã‚Œã‚’å„ªå…ˆ
                    if (index === autoSelectIndex && input && !input.value) {
                        if (!foundVersionCommit || index === 0) {
                            input.value = sha;
                            select.value = sha;
                        }
                    }
                });
                
                // v19.9.24ã¨v19.9.25ã‚’è‡ªå‹•é¸æŠ
                if (selectId === 'baseCommitSelect' || selectId === 'commit1Select') {
                    // BASE_COMMIT: v19.9.24ã‚’è‡ªå‹•é¸æŠ
                    if (foundV1924 && input) {
                        input.value = foundV1924.sha;
                        select.value = foundV1924.sha;
                        console.log(`v19.9.24ã‚’æ¤œå‡ºã—ã¦è‡ªå‹•é¸æŠï¼ˆBASE_COMMITï¼‰: ${foundV1924.sha}`);
                    } else if (!input.value || input.value === '8cfd30d08154cf71504cdba9d775c41f414deba9') {
                        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒãã®ã¾ã¾ãªã‚‰ä¿æŒï¼ˆæ—¢ã«v19.9.24ã®SHAãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ï¼‰
                        console.log('v19.9.24ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚');
                    }
                }
                
                if (selectId === 'commitHashSelect' || selectId === 'commit2Select') {
                    // HEAD_COMMIT: v19.9.25ã‚’è‡ªå‹•é¸æŠ
                    if (foundV1925 && input) {
                        input.value = foundV1925.sha;
                        select.value = foundV1925.sha;
                        console.log(`[loadLatestCommits] ${selectId}: v19.9.25ã‚’æ¤œå‡ºã—ã¦è‡ªå‹•é¸æŠï¼ˆHEAD_COMMITï¼‰: ${foundV1925.sha}`);
                        // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                        const outputDiv = document.getElementById('diff-output');
                        if (outputDiv) {
                            outputDiv.innerHTML = `<div style="color: #2e7d32; padding: 10px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; margin: 10px 0;">
                                âœ… <strong>v19.9.25ã‚’æ¤œå‡ºã—ã¾ã—ãŸ</strong><br>
                                ã‚³ãƒŸãƒƒãƒˆSHA: <code>${foundV1925.sha}</code> ã‚’æ¯”è¼ƒå…ˆã«è¨­å®šã—ã¾ã—ãŸã€‚
                            </div>`;
                        }
                    } else if (input && !input.value && commits.length > 0) {
                        // v19.9.25ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯æœ€æ–°ã‚’é¸æŠï¼ˆãŸã ã—ã€v19.9.25ãŒè¦‹ã¤ã‹ã‚‹ã¾ã§å¾…ã¤ï¼‰
                        input.value = commits[0].sha;
                        select.value = commits[0].sha;
                        // v19.9.25ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                        const outputDiv = document.getElementById('diff-output');
                        if (outputDiv && selectId === 'commit2Select') {
                            outputDiv.innerHTML = `<div style="color: #ff9800; padding: 10px; background: #fff3e0; border-left: 4px solid #ff9800; border-radius: 4px; margin: 10px 0;">
                                âš ï¸ <strong>v19.9.25ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</strong><br>
                                v19.9.25ã®ã‚³ãƒŸãƒƒãƒˆSHAã‚’æ‰‹å‹•ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<br>
                                GitHubã«pushã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€pushå¾Œã«å†åº¦è©¦ã—ã¦ãã ã•ã„ã€‚<br>
                                <small>ç¾åœ¨ã®æœ€æ–°ã‚³ãƒŸãƒƒãƒˆ: <code>${commits[0].sha.substring(0, 7)}</code> ã‚’ä¸€æ™‚çš„ã«è¨­å®šã—ã¾ã—ãŸã€‚</small>
                            </div>`;
                        }
                        console.warn('v19.9.25ã‚’å«ã‚€ã‚³ãƒŸãƒƒãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚GitHubã«pushã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
                    } else if (!foundV1925) {
                        const outputDiv = document.getElementById('diff-output');
                        if (outputDiv && selectId === 'commit2Select') {
                            outputDiv.innerHTML = `<div style="color: #ff9800; padding: 10px; background: #fff3e0; border-left: 4px solid #ff9800; border-radius: 4px; margin: 10px 0;">
                                âš ï¸ <strong>v19.9.25ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</strong><br>
                                v19.9.25ã®ã‚³ãƒŸãƒƒãƒˆSHAã‚’æ‰‹å‹•ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<br>
                                GitHubã«pushã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€pushå¾Œã«å†åº¦è©¦ã—ã¦ãã ã•ã„ã€‚
                            </div>`;
                        }
                        console.warn('v19.9.25ã‚’å«ã‚€ã‚³ãƒŸãƒƒãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚GitHubã«pushã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
                    }
                }
                
                // âœ… æœ€æ–°2ã¤ã®SHAã‚’è‡ªå‹•è¡¨ç¤ºï¼ˆAIå…ˆå›ã‚Šãƒ»GitHubå·®åˆ†å–å¾—ã‚¿ãƒ–ç”¨ï¼‰
                // commit2Selectã®å ´åˆã®ã¿ã€æœ€æ–°2ã¤ã®ã‚³ãƒŸãƒƒãƒˆã‚’è¡¨ç¤ºï¼ˆæœ€æ–°ã®çµæœã‚’ä½¿ç”¨ï¼‰
                if (selectId === 'commit2Select' && commits.length >= 2) {
                    // v19.9.25ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã¯ãã‚Œã‚’å„ªå…ˆè¡¨ç¤º
                    let displayCommits = commits.slice(0, 2);
                    
                    // v19.9.25ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã¯ã€ãã‚Œã‚’æœ€æ–°ã¨ã—ã¦è¡¨ç¤º
                    if (foundV1925 && commits.length > 0) {
                        const v1925Index = commits.findIndex(c => c.sha === foundV1925.sha);
                        if (v1925Index >= 0) {
                            // v19.9.25ã‚’æœ€æ–°ã¨ã—ã¦ã€ãã®1ã¤å‰ã‚’è¡¨ç¤º
                            displayCommits = [commits[v1925Index]];
                            if (v1925Index + 1 < commits.length) {
                                displayCommits.push(commits[v1925Index + 1]);
                            } else if (commits.length > 1) {
                                displayCommits.push(commits[0]);
                            }
                        }
                    }
                    
                    updateLatestCommitsDisplay(displayCommits);
                    console.log(`æœ€æ–°2ã¤ã®ã‚³ãƒŸãƒƒãƒˆã‚’è¡¨ç¤º: ${displayCommits.map(c => c.sha.substring(0, 7)).join(', ')}`);
                }
                
            } catch (error) {
                select.innerHTML = '<option value="">ï¼ˆå–å¾—å¤±æ•—ãƒ»æ‰‹å‹•å…¥åŠ›ã—ã¦ãã ã•ã„ï¼‰</option>';
                console.warn('GitHubã‚³ãƒŸãƒƒãƒˆå–å¾—ã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        // ãƒ–ãƒ©ãƒ³ãƒé¸æŠãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«å†èª­ã¿è¾¼ã¿
        function onBranchChange() {
            const branchSelect = document.getElementById('branchSelect');
            const branch = branchSelect ? branchSelect.value : 'patch';
            
            // é¸æŠã•ã‚ŒãŸãƒ–ãƒ©ãƒ³ãƒã‚’è¡¨ç¤º
            const outputDiv = document.getElementById('diff-output');
            if (outputDiv) {
                outputDiv.innerHTML = `<div style="color: #0288d1; padding: 10px; background: #e0f2f7; border-left: 4px solid #0288d1; border-radius: 4px; margin: 10px 0;">
                    ğŸ”„ <strong>${branch}ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ã‚³ãƒŸãƒƒãƒˆã‚’å–å¾—ä¸­...</strong>
                </div>`;
            }
            
            // ã‚³ãƒŸãƒƒãƒˆãƒªã‚¹ãƒˆã‚’å†èª­ã¿è¾¼ã¿
            loadLatestCommits('commit1Select', 'commit1', 1);  // BASE_COMMIT
            loadLatestCommits('commit2Select', 'commit2', 0);  // HEAD_COMMIT
        }
        
        // æœ€æ–°2ã¤ã®SHAã‚’è‡ªå‹•è¡¨ç¤ºï¼ˆAIå…ˆå›ã‚Šï¼‰
        function updateLatestCommitsDisplay(latestCommits) {
            const displayDiv = document.getElementById('latest-commits-list');
            if (!displayDiv || !latestCommits || latestCommits.length < 2) return;
            
            const commit1 = latestCommits[0]; // æœ€æ–°ï¼ˆHEAD_COMMITï¼‰
            const commit2 = latestCommits[1]; // 1ã¤å‰ï¼ˆBASE_COMMITï¼‰
            
            const sha1 = commit1.sha;
            const sha2 = commit2.sha;
            const shortSha1 = sha1.substring(0, 7);
            const shortSha2 = sha2.substring(0, 7);
            const message1 = commit1.commit.message.split('\n')[0].substring(0, 40);
            const message2 = commit2.commit.message.split('\n')[0].substring(0, 40);
            
            displayDiv.innerHTML = `
                <div style="margin-bottom: 15px;">
                    <div style="font-weight: bold; color: #1976d2; margin-bottom: 5px;">ğŸ“Œ æœ€æ–°ï¼ˆHEAD_COMMITï¼‰:</div>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <code style="flex: 1; padding: 8px; background: white; border-radius: 4px; word-break: break-all; font-size: 0.85rem;">${sha1}</code>
                        <button onclick="copyCommitSha('${sha1}')" style="padding: 8px 15px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap;">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;">${shortSha1} - ${message1}</div>
                </div>
                <div>
                    <div style="font-weight: bold; color: #1976d2; margin-bottom: 5px;">ğŸ“Œ 1ã¤å‰ï¼ˆBASE_COMMITï¼‰:</div>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <code style="flex: 1; padding: 8px; background: white; border-radius: 4px; word-break: break-all; font-size: 0.85rem;">${sha2}</code>
                        <button onclick="copyCommitSha('${sha2}')" style="padding: 8px 15px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap;">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;">${shortSha2} - ${message2}</div>
                </div>
            `;
        }
        
        // v19.9.25æ¤œå‡ºãƒ‡ãƒãƒƒã‚°
        async function debugV1925Detection() {
            const outputDiv = document.getElementById('diff-output');
            if (outputDiv) {
                outputDiv.innerHTML = '<div style="color: #0288d1; padding: 10px; background: #e0f2f7; border-left: 4px solid #0288d1; border-radius: 4px; margin: 10px 0;">ğŸ”„ v19.9.25æ¤œå‡ºãƒ‡ãƒãƒƒã‚°ä¸­...</div>';
            }
            
            try {
                const branchSelect = document.getElementById('branchSelect');
                const branch = branchSelect ? branchSelect.value : 'patch';
                const apiUrl = `https://api.github.com/repos/smart-price-official/Smart-Price-Book/commits?sha=${branch}&per_page=30`;
                
                console.log(`[DEBUG] v19.9.25æ¤œå‡ºãƒ‡ãƒãƒƒã‚°é–‹å§‹: branch=${branch}, apiUrl=${apiUrl}`);
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    throw new Error(`GitHub API ã‚¨ãƒ©ãƒ¼: ${response.status} ${response.statusText}`);
                }
                
                const commits = await response.json();
                console.log(`[DEBUG] å–å¾—ã—ãŸã‚³ãƒŸãƒƒãƒˆæ•°: ${commits.length}`);
                
                // v19.9.25ã‚’å«ã‚€ã‚³ãƒŸãƒƒãƒˆã‚’æ¤œç´¢
                let foundV25 = null;
                const versionCommits = [];
                
                commits.forEach((commit, index) => {
                    const message = commit.commit.message.split('\n')[0];
                    const versionMatch = message.match(/v19\.9\.(\d+)/i);
                    
                    if (versionMatch) {
                        const versionNum = parseInt(versionMatch[1]);
                        versionCommits.push({ index, sha: commit.sha, version: versionNum, message });
                        console.log(`[DEBUG] ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¤œå‡º: index=${index}, v19.9.${versionNum}, sha=${commit.sha.substring(0, 7)}, message="${message.substring(0, 60)}"`);
                        
                        if (versionNum === 25 && !foundV25) {
                            foundV25 = { index, sha: commit.sha, message, commit };
                            console.log(`[DEBUG] âœ… v19.9.25ã‚’æ¤œå‡ºï¼ index=${index}, sha=${commit.sha.substring(0, 7)}`);
                        }
                    }
                });
                
                let debugInfo = `<div style="color: #1976d2; padding: 15px; background: #e3f2fd; border-left: 4px solid #2196f3; border-radius: 4px; margin: 10px 0;">`;
                debugInfo += `<h3 style="margin-top: 0;">ğŸ” v19.9.25æ¤œå‡ºãƒ‡ãƒãƒƒã‚°çµæœ</h3>`;
                debugInfo += `<p><strong>ãƒ–ãƒ©ãƒ³ãƒ:</strong> ${branch}</p>`;
                debugInfo += `<p><strong>å–å¾—ã—ãŸã‚³ãƒŸãƒƒãƒˆæ•°:</strong> ${commits.length}</p>`;
                debugInfo += `<p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å«ã‚€ã‚³ãƒŸãƒƒãƒˆæ•°:</strong> ${versionCommits.length}</p>`;
                
                if (foundV25) {
                    debugInfo += `<div style="color: #2e7d32; padding: 10px; background: #e8f5e9; border-radius: 4px; margin-top: 10px;">`;
                    debugInfo += `<strong>âœ… v19.9.25ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼</strong><br>`;
                    debugInfo += `ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: ${foundV25.index}<br>`;
                    debugInfo += `SHA: <code>${foundV25.sha}</code><br>`;
                    debugInfo += `çŸ­ç¸®SHA: <code>${foundV25.sha.substring(0, 7)}</code><br>`;
                    debugInfo += `ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ${foundV25.message}<br>`;
                    debugInfo += `</div>`;
                    debugInfo += `<p style="color: #ff9800; margin-top: 10px;"><strong>ğŸ’¡ çµè«–:</strong> GitHubå´ï¼ˆ${branch}ãƒ–ãƒ©ãƒ³ãƒï¼‰ã«v19.9.25ãŒå­˜åœ¨ã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ å´ã®æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚</p>`;
                } else {
                    debugInfo += `<div style="color: #ff5252; padding: 10px; background: #ffebee; border-radius: 4px; margin-top: 10px;">`;
                    debugInfo += `<strong>âŒ v19.9.25ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</strong><br>`;
                    debugInfo += `</div>`;
                    debugInfo += `<p style="color: #ff9800; margin-top: 10px;"><strong>ğŸ’¡ çµè«–:</strong> GitHubå´ï¼ˆ${branch}ãƒ–ãƒ©ãƒ³ãƒï¼‰ã«v19.9.25ãŒå­˜åœ¨ã—ã¾ã›ã‚“ã€‚<br>`;
                    debugInfo += `è€ƒãˆã‚‰ã‚Œã‚‹ç†ç”±:<br>`;
                    debugInfo += `1. v19.9.25ãŒã¾ã GitHubã«pushã•ã‚Œã¦ã„ãªã„ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã«ã®ã¿å­˜åœ¨ï¼‰<br>`;
                    debugInfo += `2. v19.9.25ãŒåˆ¥ã®ãƒ–ãƒ©ãƒ³ãƒï¼ˆmainç­‰ï¼‰ã«pushã•ã‚Œã¦ã„ã‚‹<br>`;
                    debugInfo += `3. ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã€Œv19.9.25ã€ãŒå«ã¾ã‚Œã¦ã„ãªã„</p>`;
                }
                
                if (versionCommits.length > 0) {
                    debugInfo += `<div style="margin-top: 15px; padding: 10px; background: #f5f5f5; border-radius: 4px;">`;
                    debugInfo += `<strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸€è¦§ï¼ˆæœ€æ–°10ä»¶ï¼‰:</strong><br>`;
                    versionCommits.slice(0, 10).forEach(vc => {
                        debugInfo += `â€¢ v19.9.${vc.version}: <code>${vc.sha.substring(0, 7)}</code> - ${vc.message.substring(0, 50)}<br>`;
                    });
                    debugInfo += `</div>`;
                }
                
                // æœ€æ–°5ä»¶ã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚è¡¨ç¤º
                debugInfo += `<div style="margin-top: 15px; padding: 10px; background: #fff3e0; border-radius: 4px;">`;
                debugInfo += `<strong>æœ€æ–°5ä»¶ã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰:</strong><br>`;
                commits.slice(0, 5).forEach((c, i) => {
                    const msg = c.commit.message.split('\n')[0];
                    debugInfo += `${i + 1}. <code>${c.sha.substring(0, 7)}</code> - ${msg}<br>`;
                });
                debugInfo += `</div>`;
                
                debugInfo += `</div>`;
                
                if (outputDiv) {
                    outputDiv.innerHTML = debugInfo;
                }
                
                // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚‚å‡ºåŠ›
                console.log(`[DEBUG] æ¤œå‡ºçµæœ:`, {
                    branch,
                    totalCommits: commits.length,
                    versionCommits: versionCommits.length,
                    foundV25: foundV25 ? {
                        index: foundV25.index,
                        sha: foundV25.sha.substring(0, 7),
                        message: foundV25.message
                    } : null,
                    versionList: versionCommits.slice(0, 10).map(vc => `v19.9.${vc.version}: ${vc.sha.substring(0, 7)}`)
                });
                
            } catch (error) {
                console.error('[DEBUG] ã‚¨ãƒ©ãƒ¼:', error);
                if (outputDiv) {
                    outputDiv.innerHTML = `<div style="color: #ff5252; padding: 10px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; margin: 10px 0;">âŒ <strong>ã‚¨ãƒ©ãƒ¼:</strong> ${error.message}</div>`;
                }
            }
        }
        
        // ã‚³ãƒŸãƒƒãƒˆSHAã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        function copyCommitSha(sha) {
            navigator.clipboard.writeText(sha).then(() => {
                const successDiv = document.createElement('div');
                successDiv.style.cssText = 'color: #2e7d32; padding: 10px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; margin: 10px 0; position: fixed; top: 20px; right: 20px; z-index: 10000; box-shadow: 0 2px 10px rgba(0,0,0,0.3); max-width: 400px;';
                successDiv.innerHTML = `âœ… SHAã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼<br><code style="font-size: 0.8em; color: #1b5e20;">${sha.substring(0, 20)}...</code>`;
                document.body.appendChild(successDiv);
                setTimeout(() => {
                    if (successDiv.parentNode) {
                        successDiv.parentNode.removeChild(successDiv);
                    }
                }, 2000);
            }).catch(err => {
                console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—:', err);
            });
        }

        // GitHubã®patchãƒ–ãƒ©ãƒ³ãƒã«push
        async function pushToGitHub() {
            const outputDiv = document.getElementById('diff-output');
            
            const batFilePath = 'G:\\ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–\\Cursor\\Smart Price\\GitHubã«pushã™ã‚‹.bat';
            
            // ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶ç´„ã«ã‚ˆã‚Šã€.batãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“
            // ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ãã‹ã€æ‰‹å‹•ã§ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
            
            // ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã
            try {
                const folderPath = 'G:\\ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–\\Cursor\\Smart Price';
                const folderUri = 'file:///' + folderPath.replace(/\\/g, '/').replace(/ /g, '%20');
                window.open(folderUri, '_blank');
            } catch (err) {
                console.warn('ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã‘ã¾ã›ã‚“ã§ã—ãŸ:', err);
            }
            
            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            let message = `<div style="color: #1976d2; padding: 20px; background: #e3f2fd; border-left: 4px solid #2196f3; border-radius: 4px; margin: 10px 0;">`;
            message += `<h3 style="margin-top: 0; color: #1976d2;">ğŸš€ GitHubã®patchãƒ–ãƒ©ãƒ³ãƒã«push</h3>`;
            message += `<div style="background: #e8f5e9; padding: 20px; border-left: 4px solid #4caf50; border-radius: 4px; margin: 15px 0;">`;
            message += `<h4 style="margin-top: 0; color: #2e7d32; font-size: 1.2rem;">âœ… ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ãã¾ã—ãŸ</h4>`;
            message += `<p style="margin: 15px 0; font-size: 1.1rem;"><strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:</strong></p>`;
            message += `<ol style="margin-left: 20px; font-size: 1.05rem; line-height: 1.8;">`;
            message += `<li>é–‹ã„ãŸã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ã€Œ<strong>GitHubã«pushã™ã‚‹.bat</strong>ã€ã‚’æ¢ã™</li>`;
            message += `<li>ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’<strong>ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯</strong>ã™ã‚‹</li>`;
            message += `<li>ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‹ãã€pushå‡¦ç†ãŒè‡ªå‹•çš„ã«å®Ÿè¡Œã•ã‚Œã¾ã™</li>`;
            message += `</ol>`;
            message += `<p style="margin: 10px 0; color: #666; font-size: 0.95rem;">ğŸ’¡ <strong>é‡è¦:</strong> ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶ç´„ã«ã‚ˆã‚Šã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ç›´æ¥å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã‹ã‚‰ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚</p>`;
            message += `<button onclick="openExplorerFolder()" class="btn-success" style="margin-top: 10px; padding: 10px 20px; font-size: 1rem; background: #4caf50;">ğŸ“ ã‚‚ã†ä¸€åº¦ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã</button>`;
            message += `</div>`;
            message += `<div style="background: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; border-radius: 4px; margin: 15px 0;">`;
            message += `<h4 style="margin-top: 0; color: #f57c00;">ğŸ“‹ ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ï¼ˆã‚³ãƒ”ãƒ¼ç”¨ï¼‰:</h4>`;
            message += `<div style="background: #fff; padding: 10px; border-radius: 4px; margin: 10px 0; font-family: monospace; font-size: 0.9rem; word-break: break-all; border: 2px solid #ffc107;">`;
            message += `<code style="color: #f57c00; font-weight: bold;">${batFilePath}</code>`;
            message += `</div>`;
            message += `<button onclick="copyPushCommand()" class="btn-info" style="margin-top: 5px; padding: 8px 16px;">ğŸ“‹ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚³ãƒ”ãƒ¼</button>`;
            message += `</div>`;
            message += `<div style="background: #e0f2f7; padding: 15px; border-radius: 4px; margin-top: 15px;">`;
            message += `<p style="margin: 5px 0; color: #0277bd;"><strong>ğŸ“Œ ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Ÿè¡Œã™ã‚‹ã“ã¨:</strong></p>`;
            message += `<ul style="margin-left: 20px; color: #666; margin-top: 10px;">`;
            message += `<li>dev/index.htmlã®å¤‰æ›´ã‚’è‡ªå‹•çš„ã«æ¤œå‡º</li>`;
            message += `<li>ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ï¼ˆv19.9.25ãªã©ï¼‰ã‚’è‡ªå‹•æŠ½å‡ºã—ã¦ã‚³ãƒŸãƒƒãƒˆ</li>`;
            message += `<li>patchãƒ–ãƒ©ãƒ³ãƒã«è‡ªå‹•çš„ã«åˆ‡ã‚Šæ›¿ãˆï¼ˆå­˜åœ¨ã—ãªã„å ´åˆã¯ä½œæˆï¼‰</li>`;
            message += `<li>GitHubã®patchãƒ–ãƒ©ãƒ³ãƒã«push</li>`;
            message += `<li>Gitãƒªãƒã‚¸ãƒˆãƒªãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€è‡ªå‹•çš„ã«åˆæœŸåŒ–</li>`;
            message += `</ul>`;
            message += `</div>`;
            message += `</div>`;
            
            if (outputDiv) {
                outputDiv.innerHTML = message;
            }
        }
        
        // ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã
        function openExplorerFolder() {
            const folderPath = 'G:\\ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–\\Cursor\\Smart Price';
            try {
                const folderUri = 'file:///' + folderPath.replace(/\\/g, '/').replace(/ /g, '%20');
                window.open(folderUri, '_blank');
                
                // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                const successDiv = document.createElement('div');
                successDiv.style.cssText = 'color: #2e7d32; padding: 12px 20px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; position: fixed; top: 20px; right: 20px; z-index: 10000; box-shadow: 0 2px 10px rgba(0,0,0,0.3); max-width: 400px;';
                successDiv.innerHTML = 'âœ… ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ãã¾ã—ãŸï¼<br><small style="color: #666;">ã€ŒGitHubã«pushã™ã‚‹.batã€ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</small>';
                document.body.appendChild(successDiv);
                setTimeout(() => {
                    if (successDiv.parentNode) {
                        successDiv.parentNode.removeChild(successDiv);
                    }
                }, 5000);
            } catch (err) {
                console.error('ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã‘ã¾ã›ã‚“ã§ã—ãŸ:', err);
            }
        }
        
        // ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãï¼ˆå®Ÿè¡Œï¼‰- éæ¨å¥¨ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ç›´æ¥å®Ÿè¡Œä¸å¯ï¼‰
        function openBatchFile() {
            const batFilePath = 'G:\\ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–\\Cursor\\Smart Price\\GitHubã«pushã™ã‚‹.bat';
            
            try {
                // æ–¹æ³•1: file://ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§é–‹ãï¼ˆWindowsã§ã¯å®Ÿè¡Œã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ï¼‰
                const batFileUri = 'file:///' + batFilePath.replace(/\\/g, '/').replace(/ /g, '%20');
                
                // æ–¹æ³•2: æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ã
                const link = document.createElement('a');
                link.href = batFileUri;
                link.download = ''; // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ã¯ãªãå®Ÿè¡Œ
                link.target = '_blank';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // æ–¹æ³•3: ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ - ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
                setTimeout(() => {
                    try {
                        // Windowsã®shell:ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ï¼ˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§é–‹ãï¼‰
                        const explorerPath = batFilePath.replace(/\\/g, '/');
                        window.open('file:///' + explorerPath.replace(/ /g, '%20'), '_blank');
                    } catch (e) {
                        console.warn('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã‘ã¾ã›ã‚“ã§ã—ãŸ:', e);
                    }
                }, 300);
                
                console.log('ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã—ãŸ:', batFilePath);
                
            } catch (err) {
                console.error('ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã‘ã¾ã›ã‚“ã§ã—ãŸ:', err);
                
                // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆã§ã¯ãªãç”»é¢ä¸Šã«è¡¨ç¤ºï¼‰
                const errorDiv = document.createElement('div');
                errorDiv.style.cssText = 'color: #ff5252; padding: 12px 20px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; position: fixed; top: 20px; right: 20px; z-index: 10000; box-shadow: 0 2px 10px rgba(0,0,0,0.3); max-width: 400px;';
                errorDiv.innerHTML = 'âš ï¸ ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã«é–‹ã‘ã¾ã›ã‚“ã§ã—ãŸã€‚<br><small style="color: #666;">ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰‹å‹•ã§ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„:</small><br><code style="font-size: 0.85em; word-break: break-all;">' + batFilePath + '</code>';
                document.body.appendChild(errorDiv);
                setTimeout(() => {
                    if (errorDiv.parentNode) {
                        errorDiv.parentNode.removeChild(errorDiv);
                    }
                }, 10000);
            }
        }
        
        // pushã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        function copyPushCommand() {
            const batFilePath = 'G:\\ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–\\Cursor\\Smart Price\\GitHubã«pushã™ã‚‹.bat';
            navigator.clipboard.writeText(batFilePath).then(() => {
                const successDiv = document.createElement('div');
                successDiv.style.cssText = 'color: #2e7d32; padding: 12px 20px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; position: fixed; top: 20px; right: 20px; z-index: 10000; box-shadow: 0 2px 10px rgba(0,0,0,0.3); max-width: 400px;';
                successDiv.innerHTML = 'âœ… ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼<br><small style="color: #666; font-size: 0.85em;">ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã«è²¼ã‚Šä»˜ã‘ã¦é–‹ã‘ã¾ã™</small>';
                document.body.appendChild(successDiv);
                setTimeout(() => {
                    if (successDiv.parentNode) {
                        successDiv.parentNode.removeChild(successDiv);
                    }
                }, 5000);
            }).catch(err => {
                console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—:', err);
            });
        }

        // GitHubå·®åˆ†URLã‚’ç”Ÿæˆï¼ˆå›ºå®šSHAå½¢å¼ï¼‰
        function generateDiffUrl() {
            const commit1 = document.getElementById('commit1').value.trim();
            const commit2 = document.getElementById('commit2').value.trim();
            const filePath = document.getElementById('filePath').value || 'dev/index.html';
            const outputDiv = document.getElementById('diff-output');
            
            // ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆãªã—ãƒ»ç”»é¢ä¸Šã«è¡¨ç¤ºï¼‰
            if (!commit1 || !commit2) {
                outputDiv.innerHTML = '<div style="color: #ff5252; padding: 10px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; margin: 10px 0;">âš ï¸ <strong>ã‚¨ãƒ©ãƒ¼:</strong> æ¯”è¼ƒå…ƒã¨æ¯”è¼ƒå…ˆã®ã‚³ãƒŸãƒƒãƒˆSHAã‚’å¿…ãšå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<br>HEAD~1...HEADå½¢å¼ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚å›ºå®šSHAã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<br><br>ğŸ’¡ <strong>ãƒ’ãƒ³ãƒˆ:</strong> ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã‹ã‚‰æœ€æ–°ã‚³ãƒŸãƒƒãƒˆã‚’é¸æŠã™ã‚‹ã‹ã€æ‰‹å‹•ã§ã‚³ãƒŸãƒƒãƒˆSHAã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</div>';
                return;
            }
            
            if (commit1 === 'HEAD~1' || commit1 === 'HEAD' || commit2 === 'HEAD~1' || commit2 === 'HEAD') {
                outputDiv.innerHTML = '<div style="color: #ff9800; padding: 10px; background: #fff3e0; border-left: 4px solid #ff9800; border-radius: 4px; margin: 10px 0;">âš ï¸ <strong>è­¦å‘Š:</strong> HEAD~1...HEADå½¢å¼ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚å›ºå®šSHAã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<br>ä¾‹: 8cfd30d08154cf71504cdba9d775c41f414deba9</div>';
                return;
            }
            
            const baseUrl = 'https://github.com/smart-price-official/Smart-Price-Book';
            const diffUrl = `${baseUrl}/compare/${commit1}...${commit2}#diff-${btoa(filePath).replace(/[+/=]/g, m => ({'+':'-', '/':'_', '=':''})[m])}`;
            const fileUrl = `${baseUrl}/compare/${commit1}...${commit2}?diff=split&file=1#${encodeURIComponent(filePath)}`;
            
            // BUILD_IDã‹ã‚‰æ¤œè¨¼URLã‚’ç”Ÿæˆ
            const buildId = document.getElementById('buildIdForDiff')?.value.trim() || '';
            const verifyUrlBase = 'https://smart-price-official.github.io/Smart-Price-Book/dev/';
            let verifyUrls = '';
            if (buildId) {
                const verifyUrlNormal = `${verifyUrlBase}?b=${encodeURIComponent(buildId)}`;
                const verifyUrlDebug = `${verifyUrlNormal}&debug=1`;
                verifyUrls = `

## ğŸ”— æ¤œè¨¼URL

**é€šå¸¸URL**: ${verifyUrlNormal}
**ãƒ‡ãƒãƒƒã‚°URL**: ${verifyUrlDebug}`;
            }
            
            const output = `## ğŸ” GitHubå·®åˆ†URL

**æ¨å¥¨URLï¼ˆsplitè¡¨ç¤ºï¼‰**: ${fileUrl}
**æ¯”è¼ƒURL**: ${diffUrl}
${verifyUrls}

ä½¿ã„æ–¹:
1. ä¸Šè¨˜ã®URLã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦GitHubã§å·®åˆ†ã‚’ç¢ºèª
2. ã¾ãŸã¯ã€URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã

æ³¨æ„:
- ãƒ­ãƒ¼ã‚«ãƒ«ã®gitã‚³ãƒãƒ³ãƒ‰ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰å®Ÿè¡Œã§ãã¾ã›ã‚“
- GitHubã®Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§å·®åˆ†ã‚’ç¢ºèªã—ã¦ãã ã•ã„`;

            // å‡ºåŠ›ã‚¨ãƒªã‚¢ã‚’ã‚¯ãƒªã‚¢ã—ã¦çµæœã‚’è¡¨ç¤º
            outputDiv.innerHTML = `<pre style="background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;">${output}</pre>`;
            
            const linkDiv = document.createElement('div');
            linkDiv.style.marginTop = '15px';
            linkDiv.innerHTML = `
                <a href="${fileUrl}" target="_blank" class="github-link" style="display: inline-block; padding: 10px 20px; background: #1976d2; color: white; text-decoration: none; border-radius: 4px; font-weight: bold; margin-right: 10px;">ğŸ” GitHubã§å·®åˆ†ã‚’é–‹ã</a>
            `;
            
            // æ¤œè¨¼URLãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
            if (buildId) {
                const verifyUrlNormal = `${verifyUrlBase}?b=${encodeURIComponent(buildId)}`;
                const verifyUrlDebug = `${verifyUrlNormal}&debug=1`;
                linkDiv.innerHTML += `
                    <button onclick="copyUrlToClipboard('${verifyUrlNormal}')" style="padding: 10px 20px; background: #4caf50; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; margin-right: 10px;">ğŸ“‹ é€šå¸¸URLã‚’ã‚³ãƒ”ãƒ¼</button>
                    <button onclick="copyUrlToClipboard('${verifyUrlDebug}')" style="padding: 10px 20px; background: #ff9800; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">ğŸ“‹ ãƒ‡ãƒãƒƒã‚°URLã‚’ã‚³ãƒ”ãƒ¼</button>
                `;
            }
            
            outputDiv.appendChild(linkDiv);
        }

        // URLã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ï¼ˆæ¤œè¨¼URLç”¨ï¼‰
        function copyUrlToClipboard(url) {
            navigator.clipboard.writeText(url).then(() => {
                // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”»é¢ä¸Šã«è¡¨ç¤ºï¼ˆå›ºå®šè¡¨ç¤ºï¼‰
                const successDiv = document.createElement('div');
                successDiv.style.cssText = 'color: #2e7d32; padding: 12px 20px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; position: fixed; top: 20px; right: 20px; z-index: 10000; box-shadow: 0 2px 10px rgba(0,0,0,0.3); max-width: 400px; word-break: break-all;';
                successDiv.innerHTML = 'âœ… URLã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼<br><code style="font-size: 0.85em; color: #1b5e20;">' + url + '</code>';
                document.body.appendChild(successDiv);
                setTimeout(() => {
                    if (successDiv.parentNode) {
                        successDiv.parentNode.removeChild(successDiv);
                    }
                }, 3000);
            }).catch(err => {
                // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”»é¢ä¸Šã«è¡¨ç¤ºï¼ˆå›ºå®šè¡¨ç¤ºï¼‰
                const errorDiv = document.createElement('div');
                errorDiv.style.cssText = 'color: #ff5252; padding: 12px 20px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; position: fixed; top: 20px; right: 20px; z-index: 10000; box-shadow: 0 2px 10px rgba(0,0,0,0.3); max-width: 400px;';
                errorDiv.innerHTML = `âš ï¸ ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ: ${err.message || err}`;
                document.body.appendChild(errorDiv);
                setTimeout(() => {
                    if (errorDiv.parentNode) {
                        errorDiv.parentNode.removeChild(errorDiv);
                    }
                }, 5000);
            });
        }

        // å·®åˆ†URLã‚’ã‚³ãƒ”ãƒ¼
        function copyDiffUrl() {
            const outputDiv = document.getElementById('diff-output');
            const preElement = outputDiv.querySelector('pre');
            
            if (!preElement || !preElement.textContent) {
                outputDiv.innerHTML = '<div style="color: #ff5252; padding: 10px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; margin: 10px 0;">âš ï¸ å…ˆã«GitHubå·®åˆ†URLã‚’ç”Ÿæˆã—ã¦ãã ã•ã„</div>';
                return;
            }
            
            const output = preElement.textContent;
            const urlMatch = output.match(/https:\/\/[^\s]+/);
            if (urlMatch) {
                navigator.clipboard.writeText(urlMatch[0]).then(() => {
                    // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”»é¢ä¸Šã«è¡¨ç¤º
                    const successDiv = document.createElement('div');
                    successDiv.style.cssText = 'color: #2e7d32; padding: 10px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; margin: 10px 0;';
                    successDiv.innerHTML = 'âœ… URLã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
                    outputDiv.insertBefore(successDiv, outputDiv.firstChild);
                    setTimeout(() => successDiv.remove(), 3000);
                }).catch(err => {
                    // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”»é¢ä¸Šã«è¡¨ç¤º
                    const errorDiv = document.createElement('div');
                    errorDiv.style.cssText = 'color: #ff5252; padding: 10px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; margin: 10px 0;';
                    errorDiv.innerHTML = `âš ï¸ ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ: ${err.message || err}`;
                    outputDiv.insertBefore(errorDiv, outputDiv.firstChild);
                });
            }
        }

        // ã‚³ãƒ¼ãƒ‰ã‚’ä¿ç®¡ï¼ˆlocalStorageä½¿ç”¨ï¼‰
        function saveCode() {
            const version = document.getElementById('saveVersion').value.trim();
            const fileName = document.getElementById('saveFileName').value.trim();
            const code = document.getElementById('saveCode').value;

            if (!version || !fileName || !code) {
                alert('ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ãƒ•ã‚¡ã‚¤ãƒ«åã€ã‚³ãƒ¼ãƒ‰å†…å®¹ã‚’ã™ã¹ã¦å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            // localStorageã«ä¿å­˜ï¼ˆã‚­ãƒ¼: REX_CODE_ãƒãƒ¼ã‚¸ãƒ§ãƒ³_ãƒ•ã‚¡ã‚¤ãƒ«åï¼‰
            const key = `REX_CODE_${version}_${fileName}`;
            const data = {
                version: version,
                fileName: fileName,
                code: code,
                savedAt: new Date().toISOString()
            };
            localStorage.setItem(key, JSON.stringify(data));

            alert(`ã‚³ãƒ¼ãƒ‰ã‚’ä¿ç®¡ã—ã¾ã—ãŸï¼\nãƒãƒ¼ã‚¸ãƒ§ãƒ³: ${version}\nãƒ•ã‚¡ã‚¤ãƒ«å: ${fileName}`);
            
            // å…¥åŠ›æ¬„ã‚’ã‚¯ãƒªã‚¢
            document.getElementById('saveCode').value = '';
            
            // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒªã‚¹ãƒˆã‚’æ›´æ–°
            updateVersionList();
        }

        // ã‚³ãƒ¼ãƒ‰ä¸€è¦§ã‚’è¡¨ç¤º
        function loadCodeList() {
            const version = document.getElementById('loadVersion').value.trim();
            const fileType = document.getElementById('fileType').value.trim();

            if (!version) {
                alert('ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            const codeList = document.getElementById('code-list');
            codeList.innerHTML = '';

            // localStorageã‹ã‚‰è©²å½“ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
            const keys = Object.keys(localStorage).filter(key => key.startsWith(`REX_CODE_${version}_`));
            
            if (keys.length === 0) {
                codeList.innerHTML = '<p>è©²å½“ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>';
                return;
            }

            // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã§ãƒ•ã‚£ãƒ«ã‚¿
            const filteredKeys = fileType 
                ? keys.filter(key => key.endsWith(fileType))
                : keys;

            if (filteredKeys.length === 0) {
                codeList.innerHTML = `<p>è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ï¼ˆ${fileType}ï¼‰ã®ã‚³ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>`;
                return;
            }

            filteredKeys.forEach(key => {
                try {
                    const data = JSON.parse(localStorage.getItem(key));
                    const fileName = data.fileName;
                    const savedAt = new Date(data.savedAt).toLocaleString('ja-JP');

                    const item = document.createElement('div');
                    item.className = 'code-item';
                    item.innerHTML = `
                        <div class="code-item-info">
                            <div class="code-item-name">${fileName}</div>
                            <div class="code-item-meta">ä¿å­˜æ—¥æ™‚: ${savedAt}</div>
                        </div>
                        <div class="code-item-actions">
                            <button onclick="copyCode('${key}')" class="btn-success btn-sm">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                            <button onclick="viewCode('${key}')" class="btn-info btn-sm">ğŸ‘ï¸ è¡¨ç¤º</button>
                        </div>
                    `;
                    codeList.appendChild(item);
                } catch(e) {
                    console.error('Error loading code:', e);
                }
            });
        }

        // å…¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸€è¦§ã‚’è¡¨ç¤º
        function loadAllVersions() {
            const codeList = document.getElementById('code-list');
            codeList.innerHTML = '';

            // localStorageã‹ã‚‰ã™ã¹ã¦ã®REX_CODE_ã‚­ãƒ¼ã‚’å–å¾—
            const keys = Object.keys(localStorage).filter(key => key.startsWith('REX_CODE_'));
            
            if (keys.length === 0) {
                codeList.innerHTML = '<p>ä¿ç®¡ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                return;
            }

            // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
            const versionMap = {};
            keys.forEach(key => {
                try {
                    const data = JSON.parse(localStorage.getItem(key));
                    const version = data.version;
                    if (!versionMap[version]) {
                        versionMap[version] = [];
                    }
                    versionMap[version].push({ key, ...data });
                } catch(e) {
                    console.error('Error loading code:', e);
                }
            });

            // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«è¡¨ç¤º
            Object.keys(versionMap).sort().reverse().forEach(version => {
                const versionDiv = document.createElement('div');
                versionDiv.style.marginBottom = '20px';
                versionDiv.innerHTML = `<h3 style="color: #667eea; margin-bottom: 10px;">${version}</h3>`;
                
                versionMap[version].forEach(item => {
                    const savedAt = new Date(item.savedAt).toLocaleString('ja-JP');
                    const codeItem = document.createElement('div');
                    codeItem.className = 'code-item';
                    codeItem.innerHTML = `
                        <div class="code-item-info">
                            <div class="code-item-name">${item.fileName}</div>
                            <div class="code-item-meta">ä¿å­˜æ—¥æ™‚: ${savedAt}</div>
                        </div>
                        <div class="code-item-actions">
                            <button onclick="copyCode('${item.key}')" class="btn-success btn-sm">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                            <button onclick="viewCode('${item.key}')" class="btn-info btn-sm">ğŸ‘ï¸ è¡¨ç¤º</button>
                        </div>
                    `;
                    versionDiv.appendChild(codeItem);
                });
                
                codeList.appendChild(versionDiv);
            });
        }

        // ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼
        function copyCode(key) {
            try {
                const data = JSON.parse(localStorage.getItem(key));
                navigator.clipboard.writeText(data.code).then(() => {
                    alert(`ã‚³ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼\nãƒ•ã‚¡ã‚¤ãƒ«å: ${data.fileName}`);
                }).catch(err => {
                    alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + err);
                });
            } catch(e) {
                alert('ã‚³ãƒ¼ãƒ‰ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + e);
            }
        }

        // ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º
        function viewCode(key) {
            try {
                const data = JSON.parse(localStorage.getItem(key));
                const output = document.getElementById('code-tab').querySelector('.output') || document.createElement('div');
                output.className = 'output';
                output.id = 'code-view-output';
                output.textContent = data.code;
                
                // æ—¢å­˜ã®å‡ºåŠ›ã‚’å‰Šé™¤ã—ã¦æ–°ã—ã„ã‚‚ã®ã‚’è¿½åŠ 
                const existing = document.getElementById('code-view-output');
                if (existing) existing.remove();
                
                const codeList = document.getElementById('code-list');
                codeList.parentNode.insertBefore(output, codeList.nextSibling);
                
                // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                output.scrollIntoView({ behavior: 'smooth', block: 'start' });
            } catch(e) {
                alert('ã‚³ãƒ¼ãƒ‰ã®è¡¨ç¤ºã«å¤±æ•—ã—ã¾ã—ãŸ: ' + e);
            }
        }

        // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒªã‚¹ãƒˆã‚’æ›´æ–°
        function updateVersionList() {
            const keys = Object.keys(localStorage).filter(key => key.startsWith('REX_CODE_'));
            const versions = new Set();
            keys.forEach(key => {
                try {
                    const data = JSON.parse(localStorage.getItem(key));
                    versions.add(data.version);
                } catch(e) {
                    // ç„¡è¦–
                }
            });
            
            const datalist = document.getElementById('versionList');
            datalist.innerHTML = '';
            Array.from(versions).sort().reverse().forEach(version => {
                const option = document.createElement('option');
                option.value = version;
                datalist.appendChild(option);
            });
        }

        // æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚€ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«é¸æŠï¼‰
        function loadLatestCode() {
            const fileInput = document.getElementById('fileInput');
            if (!fileInput.files || fileInput.files.length === 0) {
                alert('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }
            
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const content = e.target.result;
                
                // ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è‡ªå‹•è¨­å®š
                document.getElementById('saveFileName').value = file.name;
                
                // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è‡ªå‹•æŠ½å‡ºï¼ˆdev/index.htmlã®å ´åˆï¼‰
                if (file.name === 'index.html' || file.name.endsWith('.html')) {
                    const versionMatch = content.match(/VERSION:\s*(v[\d.]+)/);
                    if (versionMatch) {
                        document.getElementById('saveVersion').value = versionMatch[1];
                    }
                }
                
                // ã‚³ãƒ¼ãƒ‰å†…å®¹ã‚’è¨­å®š
                document.getElementById('saveCode').value = content;
                
                alert(`æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸï¼\nãƒ•ã‚¡ã‚¤ãƒ«å: ${file.name}\nãƒãƒ¼ã‚¸ãƒ§ãƒ³: ${document.getElementById('saveVersion').value || 'ï¼ˆè‡ªå‹•æŠ½å‡ºã§ãã¾ã›ã‚“ã§ã—ãŸï¼‰'}`);
            };
            
            reader.onerror = function() {
                alert('ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
            };
            
            reader.readAsText(file, 'UTF-8');
        }

        // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ™‚ã®è‡ªå‹•èª­ã¿è¾¼ã¿
        // PWA: Service Workerç™»éŒ²
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('[PWA] Service Workerç™»éŒ²æˆåŠŸ:', registration.scope);
                        
                        // æ›´æ–°ãŒã‚ã‚‹å ´åˆã¯é€šçŸ¥ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    console.log('[PWA] æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚');
                                    // å¿…è¦ã«å¿œã˜ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å†èª­ã¿è¾¼ã¿ã‚’ä¿ƒã™UIã‚’è¡¨ç¤º
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.warn('[PWA] Service Workerç™»éŒ²å¤±æ•—:', error);
                        // Service WorkerãŒç™»éŒ²ã§ããªãã¦ã‚‚ã‚¢ãƒ—ãƒªã¯å‹•ä½œã™ã‚‹
                    });
            });
        }
        
        // PWA: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ï¼‰
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é˜²æ­¢
            e.preventDefault();
            // å¾Œã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä¿å­˜
            deferredPrompt = e;
            // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
            const installButton = document.getElementById('pwa-install-button');
            if (installButton) {
                installButton.style.display = 'inline-block';
            }
        });
        
        // PWA: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
        function installPWA() {
            if (!deferredPrompt) {
                // ã™ã§ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã€ã¾ãŸã¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒåˆ©ç”¨ã§ããªã„
                const infoDiv = document.createElement('div');
                infoDiv.style.cssText = 'color: #ff9800; padding: 12px 20px; background: #fff3e0; border-left: 4px solid #ff9800; border-radius: 4px; position: fixed; top: 20px; right: 20px; z-index: 10000; box-shadow: 0 2px 10px rgba(0,0,0,0.3); max-width: 400px;';
                infoDiv.innerHTML = 'ğŸ“± ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚<br><small style="color: #666;">æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒå¯¾å¿œã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</small>';
                document.body.appendChild(infoDiv);
                setTimeout(() => {
                    if (infoDiv.parentNode) {
                        infoDiv.parentNode.removeChild(infoDiv);
                    }
                }, 5000);
                return;
            }
            
            // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¡¨ç¤º
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('[PWA] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’æ‰¿èªã—ã¾ã—ãŸ');
                    const successDiv = document.createElement('div');
                    successDiv.style.cssText = 'color: #2e7d32; padding: 12px 20px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; position: fixed; top: 20px; right: 20px; z-index: 10000; box-shadow: 0 2px 10px rgba(0,0,0,0.3); max-width: 400px;';
                    successDiv.innerHTML = 'âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’é–‹å§‹ã—ã¾ã—ãŸï¼<br><small style="color: #666;">ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰REX Dev Toolã‚’èµ·å‹•ã§ãã¾ã™</small>';
                    document.body.appendChild(successDiv);
                    setTimeout(() => {
                        if (successDiv.parentNode) {
                            successDiv.parentNode.removeChild(successDiv);
                        }
                    }, 5000);
                } else {
                    console.log('[PWA] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’æ‹’å¦ã—ã¾ã—ãŸ');
                }
                deferredPrompt = null;
                const installButton = document.getElementById('pwa-install-button');
                if (installButton) installButton.style.display = 'none';
            });
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('fileInput');
            if (fileInput) {
                fileInput.addEventListener('change', function() {
                    if (this.files && this.files.length > 0) {
                        loadLatestCode();
                        // è‡ªå‹•èª­ã¿è¾¼ã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤
                        const infoDiv = document.querySelector('#code-tab .info');
                        if (infoDiv) {
                            const autoLoadMsg = infoDiv.querySelector('div[style*="e3f2fd"]');
                            if (autoLoadMsg) {
                                autoLoadMsg.remove();
                            }
                        }
                    }
                });
            }
            
            // AIå…ˆå›ã‚Š: ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«GitHubã‹ã‚‰æœ€æ–°ã‚³ãƒŸãƒƒãƒˆãƒªã‚¹ãƒˆã‚’è‡ªå‹•å–å¾—
            // v19.9.25ï¼ˆHEAD_COMMITï¼‰ã¨v19.9.24ï¼ˆBASE_COMMITï¼‰ã‚’è‡ªå‹•æ¤œå‡ºã—ã¦æ¯”è¼ƒã§ãã‚‹ã‚ˆã†ã«è¨­å®š
            loadLatestCommits('commitHashSelect', 'commitHash', 0);  // ä¿®æ­£å ±å‘Šæ›¸ç”Ÿæˆã‚¿ãƒ–ï¼ˆHEAD_COMMITãƒ»v19.9.25ã‚’è‡ªå‹•æ¤œå‡ºï¼‰
            loadLatestCommits('baseCommitSelect', 'baseCommit', 1);  // ä¿®æ­£å ±å‘Šæ›¸ç”Ÿæˆã‚¿ãƒ–ï¼ˆBASE_COMMITãƒ»v19.9.24ã‚’è‡ªå‹•æ¤œå‡ºï¼‰
            loadLatestCommits('commit1Select', 'commit1', 1);        // GitHubå·®åˆ†å–å¾—ã‚¿ãƒ–ï¼ˆBASE_COMMITãƒ»v19.9.24ã‚’è‡ªå‹•æ¤œå‡ºï¼‰
            loadLatestCommits('commit2Select', 'commit2', 0);        // GitHubå·®åˆ†å–å¾—ã‚¿ãƒ–ï¼ˆHEAD_COMMITãƒ»v19.9.25ã‚’è‡ªå‹•æ¤œå‡ºï¼‰
            
            // patchãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            const patchFileInput = document.getElementById('patchFileInput');
            if (patchFileInput) {
                patchFileInput.addEventListener('change', function() {
                    loadPatchFile();
                });
            }
        });
        
        // æœ€æ–°æƒ…å ±ã‚’å–å¾—ï¼ˆãƒªãƒ­ãƒ¼ãƒ‰ã¾ãŸã¯GitHub APIã‹ã‚‰å–å¾—ï¼‰
        function refreshLatestInfo() {
            const outputDiv = document.getElementById('patch-to-dev-output') || 
                             document.getElementById('diff-output') || 
                             document.getElementById('report-output');
            
            if (outputDiv) {
                outputDiv.innerHTML = '<div style="color: #0288d1; padding: 10px; background: #e0f2f7; border-left: 4px solid #0288d1; border-radius: 4px; margin: 10px 0;">ğŸ”„ <strong>æœ€æ–°æƒ…å ±ã‚’å–å¾—ä¸­...</strong></div>';
            }
            
            // GitHubã‹ã‚‰æœ€æ–°ã‚³ãƒŸãƒƒãƒˆã‚’å†å–å¾—
            loadLatestCommits('commitHashSelect', 'commitHash', 0);
            loadLatestCommits('baseCommitSelect', 'baseCommit', 1);
            loadLatestCommits('commit1Select', 'commit1', 1);
            loadLatestCommits('commit2Select', 'commit2', 0);
            
            setTimeout(() => {
                if (outputDiv) {
                    outputDiv.innerHTML = '<div style="color: #2e7d32; padding: 10px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; margin: 10px 0;">âœ… <strong>æœ€æ–°æƒ…å ±ã‚’å–å¾—ã—ã¾ã—ãŸ</strong></div>';
                }
            }, 2000);
        }
        
        // patchãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
        let currentPatchFileContent = '';
        
        function loadPatchFile() {
            const fileInput = document.getElementById('patchFileInput');
            const fileNameDiv = document.getElementById('selectedFileName');
            const contentTextarea = document.getElementById('patchFileContent');
            const outputDiv = document.getElementById('patch-to-dev-output');
            
            if (!fileInput || !fileInput.files || fileInput.files.length === 0) {
                if (outputDiv) {
                    outputDiv.innerHTML = '<div style="color: #ff5252; padding: 10px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; margin: 10px 0;">âš ï¸ <strong>ã‚¨ãƒ©ãƒ¼:</strong> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</div>';
                }
                return;
            }
            
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                currentPatchFileContent = e.target.result;
                const lines = currentPatchFileContent.split('\n');
                const previewLines = lines.slice(0, 500).join('\n');
                
                if (fileNameDiv) {
                    fileNameDiv.textContent = `ğŸ“„ ${file.name} (${(file.size / 1024).toFixed(2)} KB, ${lines.length}è¡Œ)`;
                }
                
                if (contentTextarea) {
                    contentTextarea.value = previewLines;
                    if (lines.length > 500) {
                        contentTextarea.value += `\n\n... (ä»¥ä¸‹${lines.length - 500}è¡Œã¯çœç•¥ã•ã‚Œã¦ã„ã¾ã™)`;
                    }
                }
                
                if (outputDiv) {
                    outputDiv.innerHTML = `<div style="color: #2e7d32; padding: 10px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; margin: 10px 0;">
                        âœ… <strong>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ</strong><br>
                        ãƒ•ã‚¡ã‚¤ãƒ«å: <code>${file.name}</code><br>
                        ã‚µã‚¤ã‚º: ${(file.size / 1024).toFixed(2)} KB<br>
                        è¡Œæ•°: ${lines.length}è¡Œ<br>
                        <br>
                        ãƒ¦ã‚¤ã®OKç¢ºèªå¾Œã€ã€Œdevã«åæ˜ ï¼ˆã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ï¼‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
                    </div>`;
                }
            };
            
            reader.onerror = function() {
                if (outputDiv) {
                    outputDiv.innerHTML = '<div style="color: #ff5252; padding: 10px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; margin: 10px 0;">âŒ <strong>ã‚¨ãƒ©ãƒ¼:</strong> ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</div>';
                }
            };
            
            reader.readAsText(file, 'UTF-8');
        }
        
        // devã«åæ˜ ï¼ˆã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ï¼‰
        function copyToDev() {
            if (!currentPatchFileContent) {
                const outputDiv = document.getElementById('patch-to-dev-output');
                if (outputDiv) {
                    outputDiv.innerHTML = '<div style="color: #ff5252; padding: 10px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; margin: 10px 0;">âš ï¸ <strong>ã‚¨ãƒ©ãƒ¼:</strong> ã¾ãšãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„ã€‚</div>';
                }
                return;
            }
            
            navigator.clipboard.writeText(currentPatchFileContent).then(() => {
                const outputDiv = document.getElementById('patch-to-dev-output');
                if (outputDiv) {
                    outputDiv.innerHTML = `<div style="color: #2e7d32; padding: 10px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; margin: 10px 0;">
                        âœ… <strong>ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</strong><br>
                        <br>
                        <strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:</strong><br>
                        1. Smart-Price-Book/dev/index.html ã‚’é–‹ã<br>
                        2. ãƒ•ã‚¡ã‚¤ãƒ«ã®å…¨å†…å®¹ã‚’é¸æŠï¼ˆCtrl+Aï¼‰<br>
                        3. ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã®å†…å®¹ã‚’è²¼ã‚Šä»˜ã‘ï¼ˆCtrl+Vï¼‰<br>
                        4. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ï¼ˆCtrl+Sï¼‰<br>
                        <br>
                        ğŸ’¡ <strong>æ³¨æ„:</strong> å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
                    </div>`;
                }
            }).catch(err => {
                const outputDiv = document.getElementById('patch-to-dev-output');
                if (outputDiv) {
                    outputDiv.innerHTML = `<div style="color: #ff5252; padding: 10px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; margin: 10px 0;">
                        âŒ <strong>ã‚¨ãƒ©ãƒ¼:</strong> ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚<br>
                        ã‚¨ãƒ©ãƒ¼è©³ç´°: ${err.message || err}
                    </div>`;
                }
            });
        }
        
        // dev/index.htmlã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        function downloadPatchFile() {
            if (!currentPatchFileContent) {
                const outputDiv = document.getElementById('patch-to-dev-output');
                if (outputDiv) {
                    outputDiv.innerHTML = '<div style="color: #ff5252; padding: 10px; background: #ffebee; border-left: 4px solid #ff5252; border-radius: 4px; margin: 10px 0;">âš ï¸ <strong>ã‚¨ãƒ©ãƒ¼:</strong> ã¾ãšãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„ã€‚</div>';
                }
                return;
            }
            
            const blob = new Blob([currentPatchFileContent], { type: 'text/html;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'index.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            const outputDiv = document.getElementById('patch-to-dev-output');
            if (outputDiv) {
                outputDiv.innerHTML = '<div style="color: #2e7d32; padding: 10px; background: #e8f5e9; border-left: 4px solid #2e7d32; border-radius: 4px; margin: 10px 0;">âœ… <strong>index.htmlã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼</strong><br>ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Smart-Price-Book/dev/index.html ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚</div>';
            }
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.getElementById('currentVersion').addEventListener('input', () => {
            updateVersion();
            updateBuildId();
        });
        document.getElementById('dateTime').addEventListener('input', updateBuildId);

        // æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’äº‹å‰ã«èª­ã¿è¾¼ã‚€ï¼ˆãƒšãƒ¼ã‚¸ã‚’é–‹ã„ãŸã¨ãï¼‰
        async function loadPreloadedCode() {
            // æœ€æ–°ã®dev/index.htmlã®å†…å®¹ã‚’äº‹å‰ã«è²¼ã‚Šè¾¼ã‚€
            // ãƒ¬ãƒƒã‚¯ã‚¹ãŒäº‹å‰ã«æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šè¾¼ã‚“ã§ãŠã
            
            // localStorageã«æœ€æ–°ã‚³ãƒ¼ãƒ‰ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ãã‚Œã‚’èª­ã¿è¾¼ã‚€
            const latestVersion = 'v19.9.24'; // æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ‰‹å‹•ã§æ›´æ–°ï¼ˆãƒ¬ãƒƒã‚¯ã‚¹ãŒæ›´æ–°ï¼‰
            const latestFileName = 'index.html';
            const key = `REX_CODE_${latestVersion}_${latestFileName}`;
            const savedData = localStorage.getItem(key);
            
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    document.getElementById('saveVersion').value = data.version;
                    document.getElementById('saveFileName').value = data.fileName;
                    document.getElementById('saveCode').value = data.code;
                    console.log('âœ… æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’localStorageã‹ã‚‰è‡ªå‹•èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
                    return;
                } catch(e) {
                    console.warn('localStorageã‹ã‚‰ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:', e);
                }
            }
            
            // localStorageã«ãªã„å ´åˆã¯ã€æœ€æ–°ã®dev/index.htmlã‚’è‡ªå‹•ã§èª­ã¿è¾¼ã‚‚ã†ã¨ã™ã‚‹
            // æ³¨æ„: ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ã«ã‚ˆã‚Šã€file://ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã¯fetchã¯å‹•ä½œã—ã¾ã›ã‚“
            // ãã®ãŸã‚ã€ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã‚’ä¿ƒã™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            const defaultPath = 'G:\\ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–\\Cursor\\Smart Price\\Smart-Price-Book\\dev\\index.html';
            console.log('ğŸ“‚ æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•èª­ã¿è¾¼ã¿ä¸­...');
            console.log('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹:', defaultPath);
            
            // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã‚’ä¿ƒã™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            const infoDiv = document.querySelector('#code-tab .info');
            if (infoDiv && !infoDiv.querySelector('div[data-autoload-msg]')) {
                const autoLoadMsg = document.createElement('div');
                autoLoadMsg.setAttribute('data-autoload-msg', 'true');
                autoLoadMsg.style.background = '#e3f2fd';
                autoLoadMsg.style.padding = '10px';
                autoLoadMsg.style.borderRadius = '5px';
                autoLoadMsg.style.marginTop = '10px';
                autoLoadMsg.style.borderLeft = '4px solid #2196f3';
                autoLoadMsg.innerHTML = `
                    <strong>ğŸ“‚ æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•èª­ã¿è¾¼ã¿</strong><br>
                    ä»¥ä¸‹ã®ãƒ‘ã‚¹ã‹ã‚‰æœ€æ–°ã®index.htmlã‚’é¸æŠã—ã¦ãã ã•ã„ï¼š<br>
                    <code style="background: #f5f5f5; padding: 2px 5px; border-radius: 3px; font-size: 11px;">${defaultPath}</code><br>
                    <button onclick="document.getElementById('fileInput').click()" class="btn-info" style="margin-top: 5px; padding: 6px 12px; font-size: 14px;">ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦è‡ªå‹•èª­ã¿è¾¼ã¿</button>
                `;
                infoDiv.appendChild(autoLoadMsg);
            }
        }
        
        // æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ã§èª­ã¿è¾¼ã‚€ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«é¸æŠå¾Œï¼‰
        function autoLoadLatestCode() {
            const fileInput = document.getElementById('fileInput');
            if (fileInput && fileInput.files && fileInput.files.length > 0) {
                loadLatestCode();
            }
        }
        
        // ãƒ¬ãƒƒã‚¯ã‚¹ãŒæœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’äº‹å‰ã«è²¼ã‚Šè¾¼ã‚€é–¢æ•°ï¼ˆæ‰‹å‹•å®Ÿè¡Œç”¨ï¼‰
        function preloadLatestCode() {
            // ã“ã®é–¢æ•°ã¯ã€ãƒ¬ãƒƒã‚¯ã‚¹ãŒæœ€æ–°ã®dev/index.htmlã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦
            // ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œã™ã‚‹ã‹ã€ã¾ãŸã¯ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒœã‚¿ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹
            alert('æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’äº‹å‰ã«è²¼ã‚Šè¾¼ã‚€ã«ã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ï¼š\n\n1. ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒœã‚¿ãƒ³ã§ dev/index.html ã‚’é¸æŠ\n2. ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ preloadLatestCodeManually() ã‚’å®Ÿè¡Œ');
        }
        
        // æ‰‹å‹•ã§æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šè¾¼ã‚€é–¢æ•°ï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”¨ï¼‰
        window.preloadLatestCodeManually = function(codeContent, version, fileName) {
            if (!codeContent) {
                alert('ã‚³ãƒ¼ãƒ‰å†…å®¹ã‚’æŒ‡å®šã—ã¦ãã ã•ã„');
                return;
            }
            document.getElementById('saveVersion').value = version || 'v19.9.24';
            document.getElementById('saveFileName').value = fileName || 'index.html';
            document.getElementById('saveCode').value = codeContent;
            alert('æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šè¾¼ã¿ã¾ã—ãŸï¼\nãƒãƒ¼ã‚¸ãƒ§ãƒ³: ' + (version || 'v19.9.24') + '\nãƒ•ã‚¡ã‚¤ãƒ«å: ' + (fileName || 'index.html'));
        };

        // åˆæœŸåŒ–
        updateDateTime();
        updateVersion();
        updateBuildId();
        updateVersionList();
        
        // ã‚³ãƒ¼ãƒ‰ä¿ç®¡ã‚¿ãƒ–ãŒé–‹ã‹ã‚ŒãŸã¨ãã«æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚€
        setTimeout(() => {
            const codeTab = document.getElementById('code-tab');
            if (codeTab && codeTab.classList.contains('active')) {
                loadPreloadedCode();
            }
        }, 500);
    </script>
</body>
</html>
